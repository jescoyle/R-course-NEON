<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>chp-intro-to-R.knit</title>

<script src="site_libs/header-attrs-2.30/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="computer-setup.html">Computer Setup</a>
</li>
<li>
  <a href="NEON-data-intro.html">NEON Data</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Chapters
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="00-module-contents.html">Chapter overview</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Core lessons</li>
    <li>
      <a href="chp-computer-navigation.html">1. Computer navigation</a>
    </li>
    <li>
      <a href="chp-intro-to-R.html">2. Intro to R</a>
    </li>
    <li>
      <a href="chp-spreadsheets.html">3. Spreadsheets</a>
    </li>
    <li>
      <a href="chp-data-structures.html">4. Data structures</a>
    </li>
    <li>
      <a href="chp-functions.html">5. Functions</a>
    </li>
    <li>
      <a href="chp-ggplot2-part1.html">6. Intro to ggplot2</a>
    </li>
    <li>
      <a href="chp-tidyverse-basics.html">7. Tidy data</a>
    </li>
    <li>
      <a href="chp-program-flow.html">8. Program flow</a>
    </li>
    <li>
      <a href="chp-example-analysis.html">9. Example analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="download-student-RStudio-project.html">RStudio Workbook &amp; Exercises</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<div id="chapter-2.-intro-to-r-and-rstudio"
class="section level1 tabset">
<h1 class="tabset">Chapter 2. Intro to R and RStudio</h1>
<div id="overview" class="section level2">
<h2>Overview</h2>
<blockquote>
<p>Why should you learn how to use R?</p>
<p>Because it can do almost anything you need as a scientist:</p>
<p>R can:</p>
<ul>
<li>do computations</li>
<li>manipulate data</li>
<li>access files on your computer or the internet</li>
<li>make graphs</li>
<li>create documents</li>
<li>create apps</li>
<li>almost anything… though it is not always the best tool for every
job.</li>
</ul>
</blockquote>
<p>R is widely used in the scientific community and will always be free
to use. R is also <em>open source</em>- this means that anyone can see,
modify and distribute the code for the program. The fact that R is open
source means that thousands of users have contributed add-on packages
that increase the functionality of the base R program. If there’s an
analysis you want to do or a graph you want to make, someone has
probably made a package for it. All you have to do is find it and use
it.</p>
<p>R also makes it easier to practice <a
href="https://www.unesco.org/en/open-science">open science</a> by making
your scientific analyses transparent and reusable. This is because
analyses are saved as code rather than a series of clicks through a user
interface (like spreadsheet software). If you share this code and your
data with someone, they will be able to reproduce your analyses with a
single click.</p>
<p>We’re going to learn some of the fundamentals of the R programming
language and writing our first code script. We’ll be using RStudio: a
free, open-source R Integrated Development Environment (IDE). It
provides a built-in editor, works on all platforms (including on
servers) and provides many advantages such as integration with version
control and project management. We’ll learn some of the basics for
working with R code in RStudio.</p>
<div id="what-we-will-learn" class="section level3">
<h3>What we will learn</h3>
<p>In this lesson learners will:</p>
<ul>
<li>discover why so many scientists use R</li>
<li>describe the contents of the windows in an RStudio session</li>
<li>install and load packages in R</li>
<li>write and save a code script in a project folder</li>
<li>read and view tabular data from a file</li>
<li>use the console for mathematical calculations</li>
<li>state the rules for assigning variables</li>
<li>work with vectors</li>
<li>learn how to get help and troubleshoot error messages</li>
</ul>
<div id="key-terms-commands" class="section level4">
<h4>Key Terms &amp; Commands</h4>
<ul>
<li>command line</li>
<li>GUI (graphical user interface)</li>
<li>script</li>
<li>function and argument</li>
<li>vector</li>
<li>warnings vs. errors</li>
<li>ways to make vectors: <code>c()</code>, <code>seq()</code>,
<code>:</code>, and <code>rep()</code></li>
<li>variable assignment: <code>&lt;-</code> and <code>=</code></li>
<li><code>help()</code> or <code>?</code></li>
<li><code>ls()</code> and <code>rm()</code></li>
<li><code>read.csv()</code></li>
<li><code>getwd()</code> and <code>setwd()</code></li>
<li><code>$</code></li>
<li><code>head()</code>, <code>nrow()</code>, <code>ncol()</code> and
<code>names()</code></li>
<li><code>range()</code>, <code>mean()</code>, and
<code>table()</code></li>
</ul>
</div>
</div>
<div id="prerequisites" class="section level3">
<h3>Prerequisites</h3>
<p>Check that you have the latest version of R and RStudio installed on
your machine. This is important, as some packages may not install
correctly (or at all) if R is not up to date. For instructions on
installing (or updating) R and RStudio, please see <a
href="computer-setup.html">Computer Setup</a>.</p>
<p>Once R and RStudio are installed, you will also need to set up the
Student Workbook that accompanies this text as an RStudio project.
Instructions are in the first exercise from <a
href="chp-computer-navigation.html">Navigating your computer</a>.</p>
</div>
</div>
<div id="lesson" class="section level2">
<h2>Lesson</h2>
<div id="welcome-back-to-rstudio" class="section level3">
<h3>Welcome (back) to RStudio!</h3>
<p>In <a href="%22chp-computer-navigation.html%22">Computer
navigation</a> we used RStudio to learn how to work with files on a
computer, but didn’t really learn much about what RStudio actually is or
how it is related to the R program.</p>
<p>Let’s clarify the difference between R and RStudio:</p>
<ul>
<li>R is a program that you installed on your computer that allows you
to write code in the <strong>R programming language</strong>.</li>
<li>R is a command-line program that executes code one line at a time to
produce output (more on this later).</li>
<li>R code is usually written and saved in files called
<strong>scripts</strong> which you can customize to do almost
anything.</li>
<li>RStudio is a program that allows you to write R code and test it out
at the same time (which is why it is called an integrated development
environment). It provides a <strong>G</strong>raphical
<strong>U</strong>ser <strong>I</strong>nterface (GUI) that makes it
easier to interact with R and develop R code.</li>
</ul>
<p>We will start by opening the student workbook RStudio project that
accompanies this text. To open an RStudio project, use your computer’s
file browser to navigate to the R-course-NEON-workbook folder you
downloaded. Inside this folder, double click on the
R-course-NEON-workbook.Rproj file (see the lesson: <a
href="chp-computer-navigation.html">Computer navigation</a>)</p>
<p><strong>Basic layout</strong></p>
<p>When you first open RStudio, you will be greeted by three panels:</p>
<ul>
<li>The interactive R console/Terminal (entire left)</li>
<li>Environment/History/Connections (tabbed in upper right)</li>
<li>Files/Plots/Packages/Help/Viewer (tabbed in lower right)</li>
</ul>
<p>If you opened the R-course-NEON-workbook project then your RStudio
session should look like this:</p>
<div class="float">
<img src="images/01-rstudio.png" alt="RStudio layout" />
<div class="figcaption">RStudio layout</div>
</div>
<p>If you’re having trouble seeing the different windows, RStudio has
several <a
href="https://support.posit.co/hc/en-us/articles/360044226673-RStudio-Accessibility-Features">accessibility
features</a> that allow you to change the size of text and simplify the
layout. You may want to customize your setup now.</p>
<p>In <a href="chp-computer-navigation.html">Computer navigation</a> we
learned about the Terminal and File panels. In this lesson we’re going
to start working in the R console to learn about some of the basic
functionality of R. Notice that the Console and Terminal tabs share the
same panel. R console and Console are used interchangeably to refer to
the same panel. Once we start learning more complex code, we will open
the Source panel and create an R script for saving the code that we
write.</p>
<p>The first thing you will see in the R console is a bunch of
information, followed by a “&gt;” and a blinking cursor. This is a
<strong>command-line interface</strong>; it reads and evaluates one line
of code at a time, printing out any results of each line to the same
console window as it goes. If you type in commands at the command line,
R tries to execute them, and then returns a result.</p>
<p>For the first part of this lesson, you should type any code that you
see in grey boxes into the command line in the R console and then press
enter.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>type this into the command line</span></code></pre></div>
<p>This document will show you the expected output of each command in a
white boxes below like this:</p>
<pre><code>[1] expected code output</code></pre>
<p>Or, the expected output may show up directly below the line of code
and be preceded by a <code>[1]</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>type this into the command line</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>[<span class="dv">1</span>] expected code output</span></code></pre></div>
<p>Let’s start by demonstrating some of the basic functionality of
R.</p>
</div>
<div id="what-can-r-do" class="section level3">
<h3>What can R do?</h3>
<p>As mentioned in the introduction, R can do almost anything, although
it is not always the best tool for every job.</p>
<div id="arithmetic-and-calculations" class="section level4">
<h4>Arithmetic and calculations</h4>
<p>The simplest thing you could do with R is to do arithmetic:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>[1] 101</code></pre>
<p>R will print out the answer, with a preceding “[1]” because this is
the first line of output.</p>
<p>If you type in an incomplete command, R will wait for you to complete
it. For example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span></span></code></pre></div>
<pre><code>+</code></pre>
<p>Any time you press <kbd>Enter</kbd> and the R session shows a “+”
instead of a “&gt;”, it means that the console is waiting for you to
complete the command. You can either keep typing the rest of the
command:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="dv">100</span></span></code></pre></div>
<pre><code>[1] 101</code></pre>
<p>or cancel what you were doing. If you want to cancel a command you
can type <kbd>Esc</kbd> and RStudio will give you back the “&gt;”
prompt.</p>
<p>Canceling a command isn’t only useful for stopping incomplete
commands: you can also use it to tell R to stop running code (for
example if it’s taking much longer than you expect), or to get rid of
the code you’re currently writing.</p>
<p>When using R as a calculator, the order of operations is the same as
you would have learned in math class.</p>
<p>From highest to lowest precedence:</p>
<ul>
<li>Parentheses: <code>(</code>, <code>)</code></li>
<li>Exponents: <code>^</code> or <code>**</code></li>
<li>Multiply: <code>*</code></li>
<li>Divide: <code>/</code></li>
<li>Add: <code>+</code></li>
<li>Subtract: <code>-</code></li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>[1] 13</code></pre>
<p>Use parentheses to group operations in order to force the order of
evaluation if it differs from the default, or to make clear what you
intend.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>(<span class="dv">3</span> <span class="sc">+</span> <span class="dv">5</span>) <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>[1] 16</code></pre>
<p>Really small or large numbers get a scientific notation:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="dv">2</span><span class="sc">/</span><span class="dv">10000</span></span></code></pre></div>
<pre><code>[1] 2e-04</code></pre>
<p>Which is shorthand for “multiplied by <code>10^XX</code>”. So
<code>2e-4</code> is shorthand for <code>2 * 10^(-4)</code>.</p>
<p>You can write numbers in scientific notation too:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fl">5e3</span>  </span></code></pre></div>
<pre><code>[1] 5000</code></pre>
<p>R has many built in mathematical functions. To use a function, we can
type its name, followed by open and closing parentheses (just like
functions in math!). Functions take <strong>arguments</strong> as
inputs- anything we type inside the parentheses of a function is
considered an argument. Depending on the function, the number of
arguments can vary from none to multiple. For example:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">getwd</span>() <span class="co"># returns an absolute file path of the current working directory</span></span></code></pre></div>
<p>doesn’t require an argument, whereas for the next set of mathematical
functions we will need to supply the function a value in order to
compute the result.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">sin</span>(<span class="dv">1</span>)  <span class="co"># trigonometry functions</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.841471</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">1</span>)  <span class="co"># natural logarithm</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">0</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">log10</span>(<span class="dv">10</span>) <span class="co"># base-10 logarithm</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">exp</span>(<span class="fl">0.5</span>) <span class="co"># e^(1/2)</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">1.648721</span></span></code></pre></div>
<p>Some functions take multiple arguments that are separated by
commas.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># adds all numeric arguments together</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">6</span></span></code></pre></div>
<p>Did you notice the text at the end of each line of code above? This
text is called a <strong>comment</strong> because it is preceded by a
hash character (<code>#</code>). This character tells R to ignore
anything that comes after it on the same line. Since this text is not
evaluated we can use it to make notes about what the code does. You do
not need to type the comments into the command line to run the code.</p>
<div class="challenge">
<p>What should be the output for each of these commands?</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">log</span>(<span class="fu">exp</span>(<span class="dv">3</span> <span class="sc">+</span> <span class="dv">3</span>)) </span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="fl">2e-1</span> <span class="sc">+</span> <span class="dv">5</span></span></code></pre></div>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">log</span>(<span class="fu">exp</span>(<span class="dv">3</span> <span class="sc">+</span> <span class="dv">3</span>)) </span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">6</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="fl">2e-1</span> <span class="sc">+</span> <span class="dv">5</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">5.2</span></span></code></pre></div>
</div>
</details>
</div>
<p><br></p>
<div class="challenge">
<p>What do the values <code>NA</code> and <code>NULL</code> mean?</p>
<p>Run each of these commands and try to guess what is happening.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">3</span>, <span class="cn">NA</span>)</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">3</span>, <span class="cn">NULL</span>)</span></code></pre></div>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">3</span>, <span class="cn">NA</span>)</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NA</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">3</span>, <span class="cn">NULL</span>)</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span></span></code></pre></div>
<p><code>NA</code> is a special placeholder value that means that data
is missing. <code>NULL</code> is a special value that means something
does not exist. Thus, arithmetic with <code>NA</code> will by default
give a <code>NA</code> result because missing values are values that we
may have tried to collect, but failed to do so. In contrast,
<code>NULL</code> values do not take up any space and are ignored by
default in calculations. We will learn later how to ignore missing
values in calculations.</p>
</div>
</details>
</div>
<p><br></p>
</div>
<div id="work-with-stored-values-in-a-computing-environment"
class="section level4">
<h4>Work with stored values in a computing environment</h4>
<p>The first step toward writing code is to store values for use later.
We can store values using the assignment operator <code>&lt;-</code>,
like this:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">40</span></span></code></pre></div>
<p>Notice that assignment does not print a value. Instead, we stored it
for later in something called a <strong>variable</strong>.
<code>x</code> now contains the <strong>value</strong>
<code>0.025</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>x</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.025</span></span></code></pre></div>
<p>More precisely, the stored value is a <em>decimal approximation</em>
of this fraction called a <a
href="http://en.wikipedia.org/wiki/Floating_point">floating point
number</a>. The value is stored in an <strong>object</strong> named
<code>x</code> in the environment.</p>
<p>Look for the <code>Environment</code> tab in the top right panel of
RStudio, and you will see that <code>x</code> and its value have
appeared. The variable <code>x</code> can be used in place of a number
in any calculation that expects a number:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="fu">log</span>(x)</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="fl">3.688879</span></span></code></pre></div>
<p>Notice also that variables can be reassigned when they already
exist:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">100</span></span></code></pre></div>
<p><code>x</code> used to contain the value 0.025 and now it has the
value 100. You can see this in the <code>Environment</code> tab in the
upper right panel.</p>
<p>Assignment values can contain the variable being assigned to (watch
what happens to the values of <code>x</code> and <code>y</code> in the
Environment tab):</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span> </span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> x <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<p>The right hand side of the assignment can be any valid R expression.
The right hand side is <em>fully evaluated</em> before the assignment
occurs.</p>
<div class="challenge">
<p>What will be the values of <code>y</code> and <code>z</code> after
you run these lines of code in order?</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>x</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">20</span></span></code></pre></div>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="co"># type the variable names to print out their values</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>x</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">20</span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>y </span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">20</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a>z</span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">30</span></span></code></pre></div>
</div>
</details>
</div>
<p><br></p>
<p>Did you guess correctly? Even though we changed the value of
<code>x</code> in the last line, this does not change the value of
<code>y</code> or <code>z</code> because the values of these two
variables were assigned when <code>x</code> was <code>10</code>. We
would have to run the assignment of <code>y</code> and <code>z</code>
again to update their values based on the new value of
<code>x</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>x</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>x</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">20</span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>y</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">40</span></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>z</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">60</span></span></code></pre></div>
<div class="callout-trick">
<p>Instead of retyping commands that you want to run again into the
console, use the up arrow key at the command prompt. Each time you press
the up arrow the command line will cycle back through commands you typed
previously. Use the back arrow key to edit the command before running it
again.</p>
</div>
<div class="challenge">
<p>Is R case sensitive?</p>
<p>What happens when you run this code?</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>X</span></code></pre></div>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<p>We’ve discovered a very important point about variable names- they
are case sensitive! <code>x</code> is a different variable than
<code>X</code>. Thus, if you try to use a variable that you have not
defined in the environment, R will print out an error message saying
that it can’t find the variable you used.</p>
</div>
</details>
</div>
<p><br></p>
<div class="callout-important">
<p>Variable names can contain letters, numbers, underscores and periods
but no spaces. They must start with a letter or a period followed by a
letter (they cannot start with a number nor an underscore).</p>
</div>
<p>Variables beginning with a period are hidden variables. Different
people use different conventions for long variable names, these
include</p>
<ul>
<li>periods.between.words</li>
<li>underscores_between_words</li>
<li>camelCaseToSeparateWords</li>
</ul>
<p>What you use is up to you, but <strong>be consistent</strong>.</p>
<p>You should also avoid using variable names that are the same as
values or functions in R (e.g., <code>pi</code>, <code>sum</code>,
<code>c</code>, <code>names</code>, <code>data</code>). In general, try
to use a name that is specific to what the variable represents. If
you’re not sure whether a name is used in R, you can use the
<code>?</code> to look it up (more on this later):</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>?mean</span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>?average</span></code></pre></div>
<pre><code>No documentation for &#39;average&#39; in specified packages and libraries:
you could try &#39;??average&#39;</code></pre>
<p>If a name already exists for a function, it will open up a Help
window. If the name is available for you to use, then the console will
report that it could not find any documentation.</p>
<p>It is also possible to use the <code>=</code> operator for
assignment:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">40</span></span></code></pre></div>
<p>But this is much less common among R users. The most important thing
is to <strong>be consistent</strong> with the operator you use. There
are occasionally places where it is less confusing to use
<code>&lt;-</code> than <code>=</code>, and it is the most common symbol
used in the community. So the recommendation is to use
<code>&lt;-</code>.</p>
<div class="challenge">
<p>Which of the following are valid R variable names?</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>min_height</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>max.height</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>_age</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>.mass</span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>MaxLength</span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a>min<span class="sc">-</span>length</span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="dv">2</span>widths</span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>celsius2kelvin</span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a>exp</span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a>pi</span></code></pre></div>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<p>These can be used as R variables: <code>min_height</code>
<code>max.height</code> <code>MaxLength</code>
<code>celsius2kelvin</code></p>
<p>This creates a hidden variable: <code>.mass</code></p>
<p>These cannot be used to create a variable: <code>_age</code>
<code>min-length</code> <code>2widths</code></p>
<p>These should not be used as variable names because they already exist
in R: <code>pi</code> <code>exp</code></p>
</div>
</details>
</div>
<p><br></p>
</div>
<div id="calculations-on-multiple-stored-values-at-once"
class="section level4">
<h4>Calculations on multiple stored values at once</h4>
<p>R can assign multiple values to the same object- one way to do this
is using a <strong>vector</strong>, an ordered list of values that are
of the same data type (e.g. numbers, text, TRUE/FALSE). In <a
href="chp-data-structures.html">Data structures and operations</a> we
will explain in much more detail the different types of data and objects
you can create in R, but for now let’s just explore how R does
arithmetic with vectors.</p>
<p>You can construct a vector using the <code>c()</code> function:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">21</span>, <span class="dv">17</span>)</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>firstNames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Sasha&quot;</span>, <span class="st">&quot;Everett&quot;</span>, <span class="st">&quot;Hope&quot;</span>, <span class="st">&quot;Arturo&quot;</span>)</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>ages</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">18</span> <span class="dv">19</span> <span class="dv">21</span> <span class="dv">17</span></span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a>firstNames</span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Arturo&quot;</span> </span></code></pre></div>
<p>You can also put vectors together using the <code>c()</code>
function:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">20</span>, ages, <span class="dv">40</span>)</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">20</span> <span class="dv">18</span> <span class="dv">19</span> <span class="dv">21</span> <span class="dv">17</span> <span class="dv">40</span></span></code></pre></div>
<p>To select an element in a list, type the <strong>index</strong> of
the element desired inside square brackets. For example, to select the
second element:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>firstNames[<span class="dv">2</span>]</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Everett&quot;</span></span></code></pre></div>
<p>You can select multiple elements at once by typing a vector of
indices inside the square brackets:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>firstNames[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)]</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Hope&quot;</span>  <span class="st">&quot;Sasha&quot;</span></span></code></pre></div>
<p>A colon <code>:</code> is a special operator that will create a
vector of integers in order:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span></span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="dv">4</span><span class="sc">:</span><span class="dv">1</span></span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">4</span> <span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span></span></code></pre></div>
<p>To make a vector with any sequence of integers, use the
<code>seq()</code> function:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">7</span> <span class="dv">9</span></span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">10</span>)</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a> [<span class="dv">1</span>]   <span class="dv">0</span>  <span class="dv">10</span>  <span class="dv">20</span>  <span class="dv">30</span>  <span class="dv">40</span>  <span class="dv">50</span>  <span class="dv">60</span>  <span class="dv">70</span>  <span class="dv">80</span>  <span class="dv">90</span> <span class="dv">100</span></span></code></pre></div>
<p>To make a vector with repeated values used the <code>rep()</code>
function:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="co"># What is the difference in the output of these two commands?</span></span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a><span class="fu">rep</span>(firstNames, <span class="dv">4</span>)</span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Hope&quot;</span>   </span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a>[<span class="dv">12</span>] <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Arturo&quot;</span> </span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a><span class="fu">rep</span>(firstNames, <span class="at">each =</span> <span class="dv">4</span>)</span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Hope&quot;</span>   </span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a>[<span class="dv">12</span>] <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Arturo&quot;</span> </span></code></pre></div>
<div class="challenge">
<p>Can you predict what each of the following lines of code will
return?</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;Betsy&quot;</span>, firstNames)</span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a>firstNames[<span class="dv">4</span><span class="sc">:</span><span class="dv">1</span>]</span>
<span id="cb49-3"><a href="#cb49-3" tabindex="-1"></a>ages[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span>
<span id="cb49-4"><a href="#cb49-4" tabindex="-1"></a>ages[<span class="dv">1</span>, <span class="dv">3</span>]</span>
<span id="cb49-5"><a href="#cb49-5" tabindex="-1"></a><span class="fu">c</span>(firstNames, ages)</span>
<span id="cb49-6"><a href="#cb49-6" tabindex="-1"></a><span class="fu">rep</span>(firstNames, ages)</span>
<span id="cb49-7"><a href="#cb49-7" tabindex="-1"></a><span class="fu">rep</span>(ages, firstNames)</span></code></pre></div>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;Betsy&quot;</span>, firstNames)</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Betsy&quot;</span>   <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Arturo&quot;</span> </span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a>firstNames[<span class="dv">4</span><span class="sc">:</span><span class="dv">1</span>]</span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Sasha&quot;</span>  </span>
<span id="cb50-6"><a href="#cb50-6" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" tabindex="-1"></a>ages[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span>
<span id="cb50-8"><a href="#cb50-8" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">19</span> <span class="dv">17</span></span></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a>ages[<span class="dv">1</span>, <span class="dv">3</span>]</span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a>Error <span class="cf">in</span> ages[<span class="dv">1</span>, <span class="dv">3</span>]<span class="sc">:</span> incorrect number of dimensions</span></code></pre></div>
<p>Why did <code>ages[1, 3]</code> give an error message? Notice that
<code>1, 3</code> is not a vector. In order to select elements 1 and 3
from <code>ages</code> we need to first create a vector containing the
integers 1 and 3: <code>c(1, 3)</code> and then place this inside the
brackets: <code>ages[c(1, 3)]</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">c</span>(firstNames, ages)</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;18&quot;</span>      <span class="st">&quot;19&quot;</span>      <span class="st">&quot;21&quot;</span>      <span class="st">&quot;17&quot;</span>     </span></code></pre></div>
<p>Notice that when we concatenated <code>firstNames</code> and
<code>ages</code> all of the ages turned into text with each number
surrounded by quotes. This is because all elements in a vector must have
the same data type, either numbers or text, but not both. R tried to fix
this by using the data type of the first vector we supplied.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="fu">rep</span>(firstNames, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;Sasha&quot;</span>   <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Everett&quot;</span> <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Hope&quot;</span>    <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Arturo&quot;</span>  <span class="st">&quot;Arturo&quot;</span> </span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, firstNames)</span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a>Warning<span class="sc">:</span> NAs introduced by coercion</span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, firstNames)<span class="sc">:</span> invalid <span class="st">&#39;times&#39;</span> argument</span></code></pre></div>
<p>The first example repeats each element of firstNames the number of
times given in ages, so “Sasha” is repeated 1 time, “Everett” is
repeated 2 times, etc. The second example causes an error because the
order of arguments is not interchangeable. The first vector provided
must contain the values to be repeated, while the second vector must
contain integers defining the number of times to repeat each value. Use
<code>?rep</code> in the Console to learn more.</p>
</div>
</details>
</div>
<p><br></p>
<p>Vectors are useful because we can use them to do multiple
calculations at once. Adding or multiplying a vector by a scalar applies
the operation to each element of the vector.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>ages <span class="sc">+</span> <span class="dv">10</span></span></code></pre></div>
<pre><code>[1] 28 29 31 27</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> ages</span></code></pre></div>
<pre><code>[1] 36 38 42 34</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a>ages <span class="sc">/</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>[1]  9.0  9.5 10.5  8.5</code></pre>
<p>Arithmetic between two vectors is conducted element by element:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a>ages <span class="sc">+</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span></code></pre></div>
<pre><code>[1] 19 21 24 21</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>ages <span class="sc">-</span> ages</span></code></pre></div>
<pre><code>[1] 0 0 0 0</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a>ages[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="sc">-</span> ages[<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>[1] -3  2</code></pre>
<div class="challenge">
<p>Do this math in R</p>
<ol style="list-style-type: decimal">
<li>Calculate the sum of all integers between 1 and 100.</li>
<li>Calculate the difference between the sum of all odd numbers between
1 and 50 and the sum of all even numbers between 1 and 50.</li>
</ol>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<p>There are lots of ways to solve this problem. Here is one way.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="co"># Sum of all integers between 1 and 100</span></span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>)</span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">5050</span></span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a><span class="co"># Difference between sum of odds and evens  between 1 and 50</span></span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a>odds <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">50</span>, <span class="dv">2</span>) <span class="co"># a vector with all odd numbers</span></span>
<span id="cb66-7"><a href="#cb66-7" tabindex="-1"></a>evens <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">50</span>, <span class="dv">2</span>) <span class="co"># a vector with all even numbers</span></span>
<span id="cb66-8"><a href="#cb66-8" tabindex="-1"></a><span class="fu">sum</span>(odds) <span class="sc">-</span> <span class="fu">sum</span>(evens) <span class="co"># calculate sum of each vector, then take the difference</span></span>
<span id="cb66-9"><a href="#cb66-9" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="dv">25</span></span></code></pre></div>
</div>
</details>
</div>
<p><br></p>
</div>
</div>
<div id="managing-your-environment" class="section level3">
<h3>Managing your environment</h3>
<p>There are a few useful commands you can use to interact with the R
session.</p>
<p><code>ls</code> will list all of the variables and functions stored
in the global environment (your working R session):</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>  [1] &quot;A&quot;                     &quot;add_indent&quot;            &quot;ages&quot;                  &quot;all_F&quot;                
  [5] &quot;all_T&quot;                 &quot;animal&quot;                &quot;arachnids_CARI&quot;        &quot;avg_temp&quot;             
  [9] &quot;B&quot;                     &quot;C&quot;                     &quot;calc_monthly_avg&quot;      &quot;calc_monthly_summary&quot; 
 [13] &quot;calc_uncertainty&quot;      &quot;calc_uncertainty_NA&quot;   &quot;calc_uncertainty_NULL&quot; &quot;chptable&quot;             
 [17] &quot;conservation_fact&quot;     &quot;corechps&quot;              &quot;dat&quot;                   &quot;dat1&quot;                 
 [21] &quot;dat2&quot;                  &quot;DOvals_bad&quot;            &quot;DOvals_good&quot;           &quot;evens&quot;                
 [25] &quot;fahr_to_celsius&quot;       &quot;fahr_to_kelvin&quot;        &quot;field_cols&quot;            &quot;field_cols.9&quot;         
 [29] &quot;filelines&quot;             &quot;first_gt5&quot;             &quot;firstNames&quot;            &quot;gt5&quot;                  
 [33] &quot;i&quot;                     &quot;indent_len&quot;            &quot;insects&quot;               &quot;insects_big_MART&quot;     
 [37] &quot;insert_line&quot;           &quot;inv_fieldData&quot;         &quot;inv_taxa&quot;              &quot;invert_samples&quot;       
 [41] &quot;inverts&quot;               &quot;inverts_bysample&quot;      &quot;inverts_bysite&quot;        &quot;inverts_bytaxa&quot;       
 [45] &quot;inverts_bytaxa_bysite&quot; &quot;inverts_list&quot;          &quot;inverts_notaxa&quot;        &quot;j&quot;                    
 [49] &quot;j_vector&quot;              &quot;kelvin_to_celsius&quot;     &quot;m&quot;                     &quot;make_menu_item&quot;       
 [53] &quot;mean_temp&quot;             &quot;menu_labels&quot;           &quot;menu_links&quot;            &quot;menu_text_core&quot;       
 [57] &quot;menu_text_supp&quot;        &quot;microbe_wq_data&quot;       &quot;microbes&quot;              &quot;missing_dates&quot;        
 [61] &quot;missing_temp&quot;          &quot;my_function&quot;           &quot;myfunc&quot;                &quot;mypets&quot;               
 [65] &quot;n&quot;                     &quot;N&quot;                     &quot;N_months&quot;              &quot;N_sites&quot;              
 [69] &quot;newfilelines&quot;          &quot;odds&quot;                  &quot;out_files&quot;             &quot;output_matrix&quot;        
 [73] &quot;output_vector&quot;         &quot;pH_top10&quot;              &quot;project_filename&quot;      &quot;project_name&quot;         
 [77] &quot;QF_frac&quot;               &quot;QF_tab&quot;                &quot;r_file_content&quot;        &quot;r_files&quot;              
 [81] &quot;rmd_files&quot;             &quot;samples&quot;               &quot;siteBytaxa_abun&quot;       &quot;sitelist&quot;             
 [85] &quot;sites&quot;                 &quot;sites2&quot;                &quot;solution.2&quot;            &quot;solution.3&quot;           
 [89] &quot;solution.6&quot;            &quot;solution.8&quot;            &quot;some_T&quot;                &quot;suppchps&quot;             
 [93] &quot;surfwater&quot;             &quot;surfwater_Aug&quot;         &quot;temp_j_value&quot;          &quot;temp_lowerbound&quot;      
 [97] &quot;temp_output&quot;           &quot;temp_upperbound&quot;       &quot;temp_vals&quot;             &quot;tempdiff&quot;             
[101] &quot;these_dates&quot;           &quot;this_interval&quot;         &quot;this_month&quot;            &quot;this_site&quot;            
[105] &quot;this_time&quot;             &quot;total&quot;                 &quot;TSW_30min&quot;             &quot;TSW_30min_good&quot;       
[109] &quot;TSW_avg&quot;               &quot;TSW_bysite&quot;            &quot;use_dat&quot;               &quot;use_months&quot;           
[113] &quot;use_sites&quot;             &quot;use_temps&quot;             &quot;watertemp&quot;             &quot;watertemp_list&quot;       
[117] &quot;watertemp_upstream&quot;    &quot;wq&quot;                    &quot;x&quot;                     &quot;X&quot;                    
[121] &quot;y&quot;                     &quot;Y&quot;                     &quot;z&quot;                     &quot;Z&quot;                    </code></pre>
<p>Note here that we didn’t give any arguments to <code>ls</code>, but
we still needed to give the parentheses to tell R to call the
function.</p>
<p>If we type <code>ls</code> by itself, R prints a bunch of code
instead of a listing of objects.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a>ls</span></code></pre></div>
<pre><code>function (name, pos = -1L, envir = as.environment(pos), all.names = FALSE, 
    pattern, sorted = TRUE) 
{
    if (!missing(name)) {
        pos &lt;- tryCatch(name, error = function(e) e)
        if (inherits(pos, &quot;error&quot;)) {
            name &lt;- substitute(name)
            if (!is.character(name)) 
                name &lt;- deparse(name)
            warning(gettextf(&quot;%s converted to character string&quot;, 
                sQuote(name)), domain = NA)
            pos &lt;- name
        }
    }
    all.names &lt;- .Internal(ls(envir, all.names, sorted))
    if (!missing(pattern)) {
        if ((ll &lt;- length(grep(&quot;[&quot;, pattern, fixed = TRUE))) &amp;&amp; 
            ll != length(grep(&quot;]&quot;, pattern, fixed = TRUE))) {
            if (pattern == &quot;[&quot;) {
                pattern &lt;- &quot;\\[&quot;
                warning(&quot;replaced regular expression pattern &#39;[&#39; by  &#39;\\\\[&#39;&quot;)
            }
            else if (length(grep(&quot;[^\\\\]\\[&lt;-&quot;, pattern))) {
                pattern &lt;- sub(&quot;\\[&lt;-&quot;, &quot;\\\\\\[&lt;-&quot;, pattern)
                warning(&quot;replaced &#39;[&lt;-&#39; by &#39;\\\\[&lt;-&#39; in regular expression pattern&quot;)
            }
        }
        grep(pattern, all.names, value = TRUE)
    }
    else all.names
}
&lt;bytecode: 0x000001cbe2017378&gt;
&lt;environment: namespace:base&gt;</code></pre>
<p>What’s going on here?</p>
<p>Like everything in R, <code>ls</code> is the name of an object, and
entering the name of an object by itself prints the contents of the
object. The object <code>x</code> that we created earlier contains
0.025:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>[1] 0.025</code></pre>
<p>The object <code>ls</code> contains the R code that makes the
<code>ls</code> function work! We’ll talk more about how functions work
and start writing our own later.</p>
<p>You can use <code>rm</code> to delete objects you no longer need:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a><span class="fu">rm</span>(x)</span></code></pre></div>
<p>If you have lots of things in your environment and want to delete all
of them, you can pass the results of <code>ls</code> to the
<code>rm</code> function:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
<p>In this case we’ve composed the two function (just like in math!).
Like the order of operations, anything inside the innermost parentheses
is evaluated first, and so on.</p>
<p>In this case we’ve specified that the results of <code>ls</code>
should be used for the <code>list</code> argument in <code>rm</code>.
When assigning values to arguments by name, you <em>must</em> use the
<code>=</code> operator and not the <code>&lt;-</code> operator.</p>
<p>If instead we use <code>&lt;-</code>, there will be unintended side
effects, or you may get an error message:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="fu">rm</span>(list <span class="ot">&lt;-</span> <span class="fu">ls</span>())</span></code></pre></div>
<pre><code>Error in rm(list &lt;- ls()): ... must contain names or character strings</code></pre>
<div class="callout-tip">
<p><strong>Warnings vs. Errors</strong></p>
<p>Pay attention when R does something unexpected! Errors, like above,
occur when R cannot proceed with a calculation. Warnings on the other
hand usually mean that the function has run, but it probably hasn’t
worked as expected.</p>
<p>In both cases, the message that R prints out usually give you clues
how to fix a problem.</p>
</div>
<p>Notice that although <code>rm()</code> and <code>ls()</code> are
similar to the shell commands <code>rm</code> and <code>ls</code>, they
operate in different spaces. The Terminal window in RStudio accesses the
file system on your computer. The R Console accesses objects that you
create during a specific R session. Once your close R, these objects
disappear forever; they are not saved on your file system.</p>
</div>
<div id="writing-and-running-code-in-scripts" class="section level3">
<h3>Writing and running code in scripts</h3>
<p>So far we have been typing all of our R code directly into the R
console. The real power of using R is that we can save code into text
files (called <strong>scripts</strong>) that make it easy for anyone to
reproduce your analysis. When saving an R script we will use the file
extension .R to indicate that the contents are written in the R
programming language, but really it is just a text file and can be
opened by any text editor (Word, Notepad, Google Docs, OpenOffice,
TextEdit, etc).</p>
<p>Let’s make our first R script.</p>
<div class="challenge">
<p>Create a new R script.</p>
<ol style="list-style-type: decimal">
<li>Click File &gt; New File &gt; R Script.</li>
<li>The Source panel will open with a blank file like this:</li>
</ol>
<div class="float">
<img src="images/01-rstudio-script.png"
alt="RStudio layout with .R file open" />
<div class="figcaption">RStudio layout with .R file open</div>
</div>
<ol start="3" style="list-style-type: decimal">
<li>The file is not yet saved on your computer (notice that its name is
Untitled 1 in the tab at the top of the Source panel.</li>
<li>Save this file to your computer. Click File &gt; Save.</li>
<li>Choose where to save the file on your computer. We recommend
creating a new folder in your workbook named lesson-code and then saving
this script as lesson_01_code.R inside that folder. You do not need to
type .R at the end of the name. The .R file extension will be
automatically added when you click save.</li>
</ol>
</div>
<p>From now onwards, type any code you see in this lesson into the R
script you just created. This will provide a record for you to refer to
and edit later.</p>
<p>We’re going to write an R script that loads a data table from NEON
and do some calculations on values saved in it.</p>
</div>
<div id="reading-data-from-files" class="section level3">
<h3>Reading data from files</h3>
<p>R has functions to read any text-based file. One of the most widely
used formats for text-based data table is the <strong>comma separated
values</strong> (CSV) format, where each row of the table corresponds to
a row of text and values in different columns are separated by commas.
We’ll learn more about best practices for data organization in <a
href="%22chp-spreadsheets.html%22">NA</a>. For now, we will use the
<code>read.csv()</code> function to read a CSV file into a data table in
R. The object that is created by this function is called a <strong>data
frame</strong> and we will learn more about this type of object in <a
href="chp-data-structures.html">Data structures and operations</a>.</p>
<p>Type the following into your new R script:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="co"># Read in a data table with water temperature</span></span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>watertemp <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/NEON_water/watertemp_30min_TECR_2021-04_2021-10.csv&quot;</span>)</span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a><span class="co"># View the first few rows</span></span>
<span id="cb77-5"><a href="#cb77-5" tabindex="-1"></a><span class="fu">head</span>(watertemp)</span>
<span id="cb77-6"><a href="#cb77-6" tabindex="-1"></a></span>
<span id="cb77-7"><a href="#cb77-7" tabindex="-1"></a></span>
<span id="cb77-8"><a href="#cb77-8" tabindex="-1"></a><span class="co"># How many rows and columns are there in these data?</span></span>
<span id="cb77-9"><a href="#cb77-9" tabindex="-1"></a><span class="fu">nrow</span>(watertemp)</span>
<span id="cb77-10"><a href="#cb77-10" tabindex="-1"></a><span class="fu">ncol</span>(watertemp)</span>
<span id="cb77-11"><a href="#cb77-11" tabindex="-1"></a></span>
<span id="cb77-12"><a href="#cb77-12" tabindex="-1"></a><span class="co"># What are the names of the columns in this data table</span></span>
<span id="cb77-13"><a href="#cb77-13" tabindex="-1"></a><span class="fu">names</span>(watertemp)</span></code></pre></div>
<p>Typing text in a R script does not cause the code to run in the R
Console. There are several options for executing code in an R
script:</p>
<ol style="list-style-type: decimal">
<li>Select the code you want to execute by either:
<ul>
<li>highlighting it</li>
<li>placing your cursor on the line that you want to run</li>
</ul></li>
<li>Run the selected code by either:
<ul>
<li>clicking on the Run button in the upper right corner of the Source
window.</li>
<li>type <kbd>Ctrl</kbd>+<kbd>Return</kbd> in Windows or Linux or
<kbd>⌘</kbd>+<kbd>Return</kbd> on OS X.</li>
</ul></li>
</ol>
<p>NOTE: To “run” code measn the same thing as to “execute” code. We can
use the word “run” in informal contexts and “execute” in formal
contexts.</p>
<p>Run each line of code above from your R script.</p>
<p>What happens? Which lines caused output to appear in the Console?</p>
<p>The <code>read.csv()</code> function does not produce any output in
the Console if everything executes correctly. However, if you now look
in the Environment tab, you should see an object named
<code>watertemp</code>.</p>
<p>The <code>head()</code>, <code>nrow()</code>, <code>ncol()</code> and
<code>names()</code> functions are useful ways to learn more about the
size and the contents of the data. You can also see this information in
the Environment window. <code>watertemp</code> has 20544 observations
(or rows) and 10 variables (or columns). If you click on the blue arrow
to the left of the object’s name you will see the names of each of the
columns followed by information about the values contained in each
column. Lastly, clicking on the name of the object causes a new tab to
open in the Source window that shows the data table itself (try it!)</p>
<p>Recall that any line preceded by a <code>#</code> symbol is a
<strong>comment</strong>. Comments are text found in code that are not
executed and do not cause anything to happen. Comments are
<em>extremely</em> important for anyone who will need to read your code
and understand what it is doing (especially your future self!). Get in
the habit of commenting every line or every short section of your code.
It can be useful to include not just details of what the code does, but
also include a header with your name and what the overall goal of the
code is.</p>
<p>For example, add the following to the top of your script:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a><span class="do">## Code from the Introduction to R and RStudio lesson</span></span>
<span id="cb78-2"><a href="#cb78-2" tabindex="-1"></a><span class="do">## Author: YOUR NAME HERE</span></span>
<span id="cb78-3"><a href="#cb78-3" tabindex="-1"></a><span class="do">## Date: TODAYS DATE</span></span>
<span id="cb78-4"><a href="#cb78-4" tabindex="-1"></a><span class="do">## Description: This code loads and explores water temperature data from the Teakettle Lake NEON site</span></span></code></pre></div>
<p>Let’s examine the <code>read.csv()</code> function more carefully. In
the code above we provided the function with a single text argument
containing the path to the data file. Locate this file using the Files
window in RStudio.</p>
<p>What do you think would happen if we changed the code to read:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;watertemp_30min_TECR_2021-04_2021-10.csv&quot;</span>)</span></code></pre></div>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<pre><code>Warning in file(file, &quot;rt&quot;): cannot open file &#39;watertemp_30min_TECR_2021-04_2021-10.csv&#39;: No such file or directory</code></pre>
<pre><code>Error in file(file, &quot;rt&quot;): cannot open the connection</code></pre>
</details>
<p>What does this text mean? It is a warning that the function did not
execute properly. “cannot open the connection” means that R could not
find this file. Why couldn’t R file the file? We didn’t specify the
location of the file relative to the current working directory.</p>
<div id="working-directory" class="section level4">
<h4>Working directory</h4>
<p>Knowing R’s current working directory is important because when you
need to access other files (for example, to import a data file), R will
look for them relative to the current working directory.</p>
<p>Each time you create a new RStudio Project, it will create a new
directory for that project. When you open an existing
<code>.Rproj</code> file, it will open that project and set R’s working
directory to the folder that file is in.</p>
<p>You can check the current working directory with the
<code>getwd()</code> command, or by using the menus in RStudio.</p>
<div class="challenge">
<p>Get and set the working directory in R.</p>
<ol style="list-style-type: decimal">
<li><p>In the console, type <code>getwd()</code> (“wd” is short for
“working directory”) and press Enter.</p></li>
<li><p>In the Files pane, double click on the <code>data</code> folder
to open it (or navigate to any other folder you wish). To get the Files
panel back to the current working directory, click “More” and then
select “Go To Working Directory”.</p></li>
<li><p>You can change the working directory with <code>setwd()</code>,
or by using RStudio menus.</p></li>
<li><p>In the console, type <code>setwd("data")</code> and hit Enter.
Type <code>getwd()</code> and press Enter to see the new working
directory.</p></li>
<li><p>In the menus at the top of the RStudio window, click the
“Session” menu button, and then select “Set Working Directory” and then
“Choose Directory”.</p></li>
<li><p>In the windows navigator that opens, navigate back to the project
directory, and click “Open”. Note that a <code>setwd</code> command will
automatically appear in the console.</p></li>
</ol>
<p>Make sure to set your working directory back to the main
R-course-NEON-workbook folder for the rest of the lesson.</p>
</div>
<div class="callout-tip">
<p>File does not exist errors</p>
<p>When you’re attempting to reference a file in your R code and you’re
getting errors saying the file doesn’t exist, it’s a good idea to first
check your spelling and capitalization and then check your working
directory. You need to either provide an absolute path to the file, or
you need to make sure the file is saved in the working directory (or a
subfolder of the working directory) and provide a relative path.</p>
</div>
</div>
</div>
<div id="introduction-to-data-frames" class="section level3">
<h3>Introduction to data frames</h3>
<p>Data frames are a very common way to work with data tables in R. Each
row of a data frame represents one observation and each column contains
a vector of data about a particular variable. In the
<code>watertemp</code> data frame, each observation is a mean surface
water temperature measurement from <a
href="https://www.neonscience.org/field-sites/tecr">Teakettle Creek</a>
near Fresno, CA. Measurements come from several sensor locations on the
creek and are averaged over the time period defined by the
<code>startDateTime</code> and <code>endDateTime</code> columns.</p>
<p>Let’s explore these data in more detail.</p>
<p>To view the contents of a column, use the <code>$</code> operator to
extract a vector of values:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" tabindex="-1"></a><span class="co"># View a column</span></span>
<span id="cb82-2"><a href="#cb82-2" tabindex="-1"></a>watertemp<span class="sc">$</span>surfWaterTempMean</span></code></pre></div>
<p>You can do calculations on the values in a column using R’s built-in
functions:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a><span class="co"># Calculate the range of values</span></span>
<span id="cb83-2"><a href="#cb83-2" tabindex="-1"></a><span class="fu">range</span>(watertemp<span class="sc">$</span>surfWaterTempMean)</span></code></pre></div>
<pre><code>[1] NA NA</code></pre>
<p>Oops! There must be missing data in this column. Missing values are
denoted by <code>NA</code> and if there are any missing values, R will
not exclude them from its calculations.</p>
<p>To omit missing values before completing a calculation, use the
<code>na.rm = TRUE</code> argument:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a><span class="co"># Calculate the range of values excluding missing values</span></span>
<span id="cb85-2"><a href="#cb85-2" tabindex="-1"></a><span class="fu">range</span>(watertemp<span class="sc">$</span>surfWaterTempMean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>[1] -2.328 18.645</code></pre>
<div class="challenge">
<ol style="list-style-type: decimal">
<li>Use the <code>mean()</code> function to calculate the average
surface water temperature.</li>
<li>Use the <code>max()</code> and <code>min()</code> functions to
calculate the maximum and minimum surface water temperatures.</li>
</ol>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a><span class="co"># Calculate the mean surface water temperature</span></span>
<span id="cb87-2"><a href="#cb87-2" tabindex="-1"></a><span class="fu">mean</span>(watertemp<span class="sc">$</span>surfWaterTempMean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb87-3"><a href="#cb87-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">9.949536</span></span>
<span id="cb87-4"><a href="#cb87-4" tabindex="-1"></a></span>
<span id="cb87-5"><a href="#cb87-5" tabindex="-1"></a><span class="co"># Calculate the max and min surface water temperatures</span></span>
<span id="cb87-6"><a href="#cb87-6" tabindex="-1"></a><span class="fu">max</span>(watertemp<span class="sc">$</span>surfWaterTempMean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb87-7"><a href="#cb87-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">18.645</span></span>
<span id="cb87-8"><a href="#cb87-8" tabindex="-1"></a><span class="fu">min</span>(watertemp<span class="sc">$</span>surfWaterTempMean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb87-9"><a href="#cb87-9" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="fl">2.328</span></span></code></pre></div>
</div>
</details>
</div>
<p>We can also tabulate values in a column data using the
<code>table()</code> function. This function finds all of the unique
values and counts the number of times each value appears. The
<code>HOR.VER</code> column is a identifier of the location of a
tempereature sensor, so we can use it to determine how many different
sensors are in these data.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" tabindex="-1"></a><span class="co"># How many observations are from each sensor location?</span></span>
<span id="cb88-2"><a href="#cb88-2" tabindex="-1"></a><span class="fu">table</span>(watertemp<span class="sc">$</span>HOR.VER)</span></code></pre></div>
<pre><code>
101.1 102.1 
10272 10272 </code></pre>
<p>There are two sensors (101.1 and 101.2) and each has 10272
observations in this data table.</p>
<p>The <code>finalQF</code> column is a quality-control variable that
indicates whether data are acceptable for use. Let’s determine whether
all observations in these data are acceptable and have a value of 0 in
the <code>finalQF</code> column.</p>
<div class="challenge">
<p>Use the <code>table()</code> function to determine how many
observations in this data table should not be used for analysis.</p>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" tabindex="-1"></a><span class="co"># Tabulate the quality-control flag column</span></span>
<span id="cb90-2"><a href="#cb90-2" tabindex="-1"></a><span class="fu">table</span>(watertemp<span class="sc">$</span>finalQF)</span></code></pre></div>
<pre><code>
    0     1 
19919   625 </code></pre>
<p>It looks like 625 observations had a quality flag = 1, so if we were
to use these data, we should read the documentation to learn what that
means and if these data should be omitted from the analysis.</p>
</div>
</details>
</div>
<p>Columns in a dataframe are vectors and we can do math with them in
the same way that we would do math with other numeric vectors:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" tabindex="-1"></a><span class="co"># Add the expected uncertainty to the mean water temperature</span></span>
<span id="cb92-2"><a href="#cb92-2" tabindex="-1"></a><span class="co"># and save it to a variable called temp_upperbound</span></span>
<span id="cb92-3"><a href="#cb92-3" tabindex="-1"></a>temp_upperbound <span class="ot">&lt;-</span> watertemp<span class="sc">$</span>surfWaterTempMean <span class="sc">+</span> watertemp<span class="sc">$</span>surfWaterTempExpUncert</span>
<span id="cb92-4"><a href="#cb92-4" tabindex="-1"></a></span>
<span id="cb92-5"><a href="#cb92-5" tabindex="-1"></a><span class="co"># View the first 5 values in temp_upperbound</span></span>
<span id="cb92-6"><a href="#cb92-6" tabindex="-1"></a>temp_upperbound[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb92-7"><a href="#cb92-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">4.308</span> <span class="fl">4.184</span> <span class="fl">3.992</span> <span class="fl">3.785</span> <span class="fl">3.606</span></span></code></pre></div>
<div class="challenge">
<p>Calculate a lower temperature bound for each observation by
subtracting the expected uncertainty from the mean temperature.</p>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" tabindex="-1"></a><span class="co"># Calculate a lower bound</span></span>
<span id="cb93-2"><a href="#cb93-2" tabindex="-1"></a>temp_lowerbound <span class="ot">&lt;-</span> watertemp<span class="sc">$</span>surfWaterTempMean <span class="sc">-</span> watertemp<span class="sc">$</span>surfWaterTempExpUncert</span></code></pre></div>
</div>
</details>
</div>
<p>The data in the <code>watertemp</code> data frame provide a time
series of surface water temperature in Teakettle Creek that likely
fluctuates throughout the year. If we want to analyze or visualize this
time series, we need a way to work with the dates as actual numeric
values, rather than as text.</p>
<p>Base R has functions for working with dates and times, but they are
tricky to learn. We’re going to install a widely used package called
<code>lubridate</code> to work with the dates and times saved in the
<code>startDateTime</code> and <code>endDateTime</code> columns.</p>
</div>
<div id="installing-and-loading-packages" class="section level3">
<h3>Installing and loading packages</h3>
<p>“base” R is the functionality that comes installed with R, but the
powerful thing about R is its user community who have created thousands
of <strong>packages</strong> that increase its functionality. As of this
writing, there are nearly 20,000 packages available on <a
href="https://cran.r-project.org/">CRAN</a> (the comprehensive R archive
network).</p>
<p>Packages can be viewed, loaded, and detached in the Packages tab of
the lower right panel in RStudio. Clicking on this tab will display all
of the installed packages with a checkbox next to them. If there is
nothing listed then you do not have any packages installed. Packages can
be installed and updated from the Package tab with the Install and
Update buttons at the top of the tab.</p>
<p>Let’s install the <code>lubridate</code> package. Click the Install
button. In the pop-up that appears, type <code>lubridate</code>. Do not
change any of the other settings, then click Install.</p>
<p>Notice what happens in the R Console.</p>
<p>Instead of clicking the Install button, we could have installed this
packages by typing <code>install.packages("lubridate")</code> into the
Console.</p>
<p>Now this package should appear in the list of installed packages with
an empty checkbox next to it. The empty checkbox indicates that the
package is not <strong>loaded</strong> yet in this R session. That means
we cannot use the functions in it yet. You can load and unload packages
by clicking on the box next to them. Notice what happens in the Console
when you check and uncheck the box next to <code>lubridate</code>:</p>
<ul>
<li>You can make a package available for use in your R session with
<code>library(packagename)</code>.</li>
<li>You can make a previously loaded package unavailable in your R
session with <code>detach("packagename", unload = TRUE)</code>. This is
sometimes necessary if two packages are using the same name for a
function.</li>
</ul>
<div class="callout-important">
<p>Packages only need to be installed <strong>once</strong>. This saves
the package to a location on your computer that R can access.</p>
<p>You need to load packages <strong>every time</strong> you open a new
R session, if you want to be able to use the functions in them.</p>
</div>
<div class="challenge">
<p>Write a line of code in your new R script that will load the
<code>lubridate</code> package.</p>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<p>We can use the <code>library()</code> command load a packages. Notice
that the name of the packages <strong>is not</strong> inside quotation
marks. This is different from the <code>install.packages()</code>
function, where the package name must be quoted.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" tabindex="-1"></a><span class="co"># Load the lubridate package</span></span>
<span id="cb94-2"><a href="#cb94-2" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
</div>
</details>
</div>
<p><br></p>
<div class="callout-trick">
<p>Getting Help with Packages</p>
<p>Many packages come with “vignettes”: tutorials and extended example
documentation. Without any arguments, <code>vignette()</code> will list
all vignettes for all installed packages;
<code>vignette(package="package-name")</code> will list all available
vignettes for <code>package-name</code>, and
<code>vignette("vignette-name")</code> will open the specified
vignette.</p>
<p>If a package doesn’t have any vignettes, you can usually find help by
typing <code>help("package-name")</code>.</p>
<p>RStudio also has a set of excellent <a
href="https://rstudio.com/resources/cheatsheets/">cheatsheets</a> for
many packages.</p>
</div>
</div>
</div>
<div id="synthesis" class="section level2">
<h2>Synthesis</h2>
<div id="putting-it-all-together" class="section level3">
<h3>Putting it all together</h3>
<p>Let’s use what we have learned to make a graph showing how surface
water temperature changes over time in Teakettle Creek.</p>
<p>To do this we first need to convert the text in the
<code>startDateTime</code> column to a format that R can interpret as
have numerical values.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" tabindex="-1"></a><span class="co"># Convert the text to a date and time</span></span>
<span id="cb95-2"><a href="#cb95-2" tabindex="-1"></a><span class="co"># This replaces the existing startDateTime column</span></span>
<span id="cb95-3"><a href="#cb95-3" tabindex="-1"></a><span class="co"># ymd_hms() comes from the lubridate package</span></span>
<span id="cb95-4"><a href="#cb95-4" tabindex="-1"></a>watertemp<span class="sc">$</span>startDateTime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(watertemp<span class="sc">$</span>startDateTime)</span></code></pre></div>
<p>Now that R knows these values are times, we can do much more with
them:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" tabindex="-1"></a><span class="co"># View the date component of each value (but only from rows 1 - 10)</span></span>
<span id="cb96-2"><a href="#cb96-2" tabindex="-1"></a><span class="fu">date</span>(watertemp<span class="sc">$</span>startDateTime)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb96-3"><a href="#cb96-3" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;2021-04-01&quot;</span> <span class="st">&quot;2021-04-01&quot;</span> <span class="st">&quot;2021-04-01&quot;</span> <span class="st">&quot;2021-04-01&quot;</span> <span class="st">&quot;2021-04-01&quot;</span> <span class="st">&quot;2021-04-01&quot;</span> <span class="st">&quot;2021-04-01&quot;</span> <span class="st">&quot;2021-04-01&quot;</span> <span class="st">&quot;2021-04-01&quot;</span></span>
<span id="cb96-4"><a href="#cb96-4" tabindex="-1"></a>[<span class="dv">10</span>] <span class="st">&quot;2021-04-01&quot;</span></span>
<span id="cb96-5"><a href="#cb96-5" tabindex="-1"></a></span>
<span id="cb96-6"><a href="#cb96-6" tabindex="-1"></a><span class="co"># What was the most recent date that data were recorded in this data set?</span></span>
<span id="cb96-7"><a href="#cb96-7" tabindex="-1"></a><span class="fu">max</span>(<span class="fu">date</span>(watertemp<span class="sc">$</span>startDateTime))</span>
<span id="cb96-8"><a href="#cb96-8" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2021-10-31&quot;</span></span>
<span id="cb96-9"><a href="#cb96-9" tabindex="-1"></a></span>
<span id="cb96-10"><a href="#cb96-10" tabindex="-1"></a></span>
<span id="cb96-11"><a href="#cb96-11" tabindex="-1"></a><span class="co"># What was the earliest date that data were recorded in this data set?</span></span>
<span id="cb96-12"><a href="#cb96-12" tabindex="-1"></a><span class="fu">min</span>(<span class="fu">date</span>(watertemp<span class="sc">$</span>startDateTime))</span>
<span id="cb96-13"><a href="#cb96-13" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2021-04-01&quot;</span></span></code></pre></div>
<p>We can also use the <code>plot()</code> function to make a
scatterplot if we specify which values should be the <code>x</code>
coordinate and which should be the <code>y</code> coordinate:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" tabindex="-1"></a><span class="co"># Plot the mean temperature over time</span></span>
<span id="cb97-2"><a href="#cb97-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> watertemp<span class="sc">$</span>startDateTime, <span class="at">y =</span> watertemp<span class="sc">$</span>surfWaterTempMean)</span></code></pre></div>
<p><img src="images/rmd-02-unnamed-chunk-71-1.png" width="816" style="display: block; margin: auto;" /></p>
<div class="callout-tip">
<p>Here’s another way to make this same graph, which follows the format:
<code>plot(y ~ x, data = dataframename)</code>:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" tabindex="-1"></a><span class="fu">plot</span>(surfWaterTempMean <span class="sc">~</span> startDateTime, <span class="at">data =</span> watertemp)</span></code></pre></div>
<p><img src="images/rmd-02-unnamed-chunk-72-1.png" width="816" style="display: block; margin: auto;" /></p>
</div>
<p>In R there are usually many ways to write code that does the same
thing. In general, the best choice is usually the one that is easiest to
read and which involves the least repetition. Which version do you think
is better here?</p>
<p>Similarly, if we are working with several columns in the same data
frame, the <code>with()</code> function can make code much more
efficient and readable:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" tabindex="-1"></a><span class="co"># Calculate the upper and lower bounds on temperature using the</span></span>
<span id="cb99-2"><a href="#cb99-2" tabindex="-1"></a><span class="co"># mean and expected uncertainty columns in the watertemp data frame</span></span>
<span id="cb99-3"><a href="#cb99-3" tabindex="-1"></a>temp_upperbound <span class="ot">&lt;-</span> <span class="fu">with</span>(watertemp, surfWaterTempMean <span class="sc">+</span> surfWaterTempExpUncert)</span>
<span id="cb99-4"><a href="#cb99-4" tabindex="-1"></a>temp_lowerbound <span class="ot">&lt;-</span> <span class="fu">with</span>(watertemp, surfWaterTempMean <span class="sc">-</span> surfWaterTempExpUncert)</span>
<span id="cb99-5"><a href="#cb99-5" tabindex="-1"></a></span>
<span id="cb99-6"><a href="#cb99-6" tabindex="-1"></a><span class="co"># Print the first 10 values of each of these vectors</span></span>
<span id="cb99-7"><a href="#cb99-7" tabindex="-1"></a>temp_upperbound[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code> [1] 4.308 4.184 3.992 3.785 3.606 3.447 3.311 3.210 3.122 3.045</code></pre>
<div class="sourceCode" id="cb101"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" tabindex="-1"></a>temp_lowerbound[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code> [1] 4.032 3.908 3.716 3.509 3.330 3.171 3.035 2.934 2.846 2.769</code></pre>
<p>Now that you have written your first R script it is time to save your
work! Click on the save icon at the top of the Source panel.</p>
<div class="callout-important">
<p><strong>R does not auto-save.</strong> Be sure to save your work
often when you are working. Consider setting a timer to remind yourself
to do this.</p>
</div>
<p>Close your R script by clicking on the small x on the tab next to the
name of the script at the top of the Source panel. You can reopen the
script using the File &gt; Open File menus option at the top of the
RStudio window or by clicking on the name of the script file in the
Files panel.</p>
</div>
<div id="getting-help" class="section level3">
<h3>Getting help</h3>
<p>One of the most daunting aspects of R is the large number of
functions available. It would be prohibitive, if not impossible to
remember the correct usage for every function you use. Luckily, using
the help files means you don’t have to remember that!</p>
<p>R, and every package, provide help files for functions. The general
syntax to search for help on any function, “function_name”, from a
specific function that is in a package loaded into the R session is:</p>
<div class="sourceCode" id="cb103"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" tabindex="-1"></a>?function_name</span>
<span id="cb103-2"><a href="#cb103-2" tabindex="-1"></a><span class="fu">help</span>(function_name)</span></code></pre></div>
<p>For example take a look at the help file for <code>read.csv()</code>
which we used previously to read data into R.</p>
<div class="sourceCode" id="cb104"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" tabindex="-1"></a>?<span class="fu">read.csv</span>()</span></code></pre></div>
<p>This will load up a help page in RStudio. Each help page is broken
down into sections:</p>
<ul>
<li>Description: An extended description of what the function does.</li>
<li>Usage: The arguments of the function and their default values (which
can be changed).</li>
<li>Arguments: An explanation of the data each argument is
expecting.</li>
<li>Details: Any important details to be aware of.</li>
<li>Value: The data the function returns.</li>
<li>See Also: Any related functions you might find useful.</li>
<li>Examples: Some examples for how to use the function.</li>
</ul>
<p>Different functions might have different sections, but these are the
main ones you should be aware of.</p>
<p>Notice how related functions might call for the same help file. This
is because these functions have very similar applicability and often
share the same arguments as inputs to the function, so package authors
often choose to document them together in a single help file. From the
help file for <code>read.csv</code> we can see that this function is
actually a specific version of <code>read.table</code> where a few
default arguments are set to match the format of a csv file
(<code>header = TRUE</code> and <code>sep = ","</code>).</p>
<div class="sourceCode" id="cb105"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" tabindex="-1"></a>?<span class="fu">write.table</span>()</span>
<span id="cb105-2"><a href="#cb105-2" tabindex="-1"></a>?<span class="fu">write.csv</span>()</span></code></pre></div>
<div class="callout-tip">
<p>Running Examples</p>
<p>From within the function help page, you can highlight code in the
Examples and type <kbd>Ctrl</kbd>+<kbd>Return</kbd> to run it in RStudio
console. This gives you a quick way to get a feel for how a function
works.</p>
</div>
<p>Don’t worry about trying to remember the name of every function in R.
You can look them up on Google, or if you can remember the start of the
function’s name, use the tab completion in RStudio. This is one
advantage that RStudio has over R on its own, it has auto-completion
abilities that allow you to more easily look up functions, their
arguments, and the values that they take.</p>
</div>
</div>
<div id="exercises" class="section level2">
<h2>Exercises</h2>
<p>After completing these exercises, learners will be able to use R and
RStudio to:</p>
<ol style="list-style-type: decimal">
<li>execute simple mathematical calculations</li>
<li>assign and manipulate variables</li>
<li>assign, subset and manipulate data in a vector</li>
<li>execute vector algebra</li>
<li>write and save a code script</li>
<li>write comments in a code script</li>
<li>read a data table from a file</li>
<li>access and understand a function’s documentation page</li>
</ol>
<p><strong>2.1</strong></p>
<p>Create a new R script that loads water quality data from the
Teakettle Creek NEON site. These data are in a CSV file named
waterqual_inst_TECR_2021-04_2021-10.csv in the NEON_water folder in the
data directory. Write your code as if the working directory is the main
R-course-NEON-workbook project folder. Save your script as 2.1.R in the
completed exercises folder.</p>
<ol style="list-style-type: decimal">
<li>How many rows are in this data table?</li>
<li>Name two columns in this data table.</li>
</ol>
<p><strong>2.2</strong></p>
<p>Create a new R script that contains the following code. Write
comments that describe what each line of code below does (be specific).
Write a header comment at the top of your script that includes a title,
author, date and brief description of what the script does. Save your
script as 2.2.R in the completed exercises folder.</p>
<div class="sourceCode" id="cb106"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb106-2"><a href="#cb106-2" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" tabindex="-1"></a>nitrate <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/NEON_water/nitrate_15min_TECR_2021-04_2021-10.csv&quot;</span>)</span>
<span id="cb106-4"><a href="#cb106-4" tabindex="-1"></a></span>
<span id="cb106-5"><a href="#cb106-5" tabindex="-1"></a>nitrate<span class="sc">$</span>startDateTime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(nitrate<span class="sc">$</span>startDateTime)</span>
<span id="cb106-6"><a href="#cb106-6" tabindex="-1"></a>nitrate<span class="sc">$</span>endDateTime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(nitrate<span class="sc">$</span>endDateTime)</span>
<span id="cb106-7"><a href="#cb106-7" tabindex="-1"></a></span>
<span id="cb106-8"><a href="#cb106-8" tabindex="-1"></a>nitrate<span class="sc">$</span>day <span class="ot">&lt;-</span> <span class="fu">with</span>(nitrate, <span class="fu">date</span>(startDateTime))</span>
<span id="cb106-9"><a href="#cb106-9" tabindex="-1"></a></span>
<span id="cb106-10"><a href="#cb106-10" tabindex="-1"></a><span class="fu">table</span>(nitrate<span class="sc">$</span>day)</span></code></pre></div>
<p><strong>2.3</strong></p>
<p>Adapt the code in exercise 2 so that you can determine whether every
observation in the <code>nitrate</code> data frame is based on a
30-minute time period average.</p>
<p>HINT: You will need to calculate the difference in time between the
start and end dates.</p>
<p><strong>2.4</strong></p>
<p>Run these two commmands and then look at the help for the
<code>paste</code> function.</p>
<p><code>paste(1:5, 6:10, sep = "-")</code></p>
<p><code>paste(1:10, collapse = "-")</code></p>
<ol style="list-style-type: decimal">
<li>How many elements are in each of the vectors returned by these two
commands?</li>
<li>Use the information in the help file to explain why these commands
yield different results.</li>
</ol>
<p><strong>2.5</strong></p>
<p>Write code that accomplishes the following:</p>
<ol style="list-style-type: decimal">
<li>Calculate the average of all even numbers from 1 to 100 and assign
this value to a variable.</li>
<li>Calculate the average of all odd numbers from 1 to 100 and assign
this value to a different variable.</li>
<li>Calculate the difference between the two variables you created
(i.e. subtract them).</li>
</ol>
<p><strong>2.6</strong></p>
<p>Modify the script you created in this lesson so that is does the
following:</p>
<ol style="list-style-type: decimal">
<li>Calculate the difference between the maximum of
<code>temp_upperbound</code> and the minimum of
<code>temp_lowerbound</code>.</li>
<li>Calculate a vector containing the difference between
<code>temp_lowerbound</code> and <code>temp_upperbound</code>.</li>
<li>Print only the even numbered elements of the vector you created in
step 2 (e.g. elements 2, 4, 6, etc.).</li>
</ol>
<p><strong>2.7</strong> Write R code that calculates:</p>
<ol style="list-style-type: decimal">
<li>The area of a circle with radius = 5. HINT: The variable
<code>pi</code> contains the value of the number pi. Type
<code>pi</code> into the console to see this.</li>
<li>The area of circles with radii = to the numbers 1 through 100.</li>
<li>The average of the areas of the 100 circles calculated in step
2.</li>
</ol>
<p><strong>2.8</strong></p>
<p>Use the following code to answer the questions:</p>
<div class="sourceCode" id="cb107"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" tabindex="-1"></a>dogs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Alphie&quot;</span>, <span class="st">&quot;Boo&quot;</span>, <span class="st">&quot;Carter&quot;</span>)</span>
<span id="cb107-2"><a href="#cb107-2" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" tabindex="-1"></a>cats <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Donut&quot;</span>, <span class="st">&quot;Edgar&quot;</span>, <span class="st">&quot;Felix&quot;</span>)</span></code></pre></div>
<p>Write one line of code for each of the following:</p>
<ol style="list-style-type: decimal">
<li>Select the second name in <code>dogs</code>.</li>
<li>Replace the first and third names in <code>cats</code> with a value
that indicates the data are missing.</li>
</ol>
</div>
<div id="sources-and-resources" class="section level2">
<h2>Sources and Resources</h2>
<p>This lesson was adapted from <a
href="https://swcarpentry.github.io/r-novice-gapminder/"><span
class="citation">Zimmerman et al. (2019)</span></a> episodes 1 and 3 by
Jes Coyle.</p>
<p>This lesson utilizes data from <span class="citation">National
Ecological Observatory Network (NEON) (2023a)</span> and <span
class="citation">National Ecological Observatory Network (NEON)
(2023b)</span>.</p>
<div id="additional-resources" class="section level3">
<h3>Additional Resources</h3>
<ul>
<li><a
href="https://support.posit.co/hc/en-us/categories/200098757-Learn-R">Learn
R by Posit</a></li>
<li><a href="https://www.youtube.com/watch?v=kfcX5DEMAp4">#RYouWithMe:
Basic Basics Lesson 1: An Opinionated Tour of RStudio</a></li>
<li><a href="http://www.statmethods.net/">Quick R</a></li>
<li><a href="http://www.rstudio.com/resources/cheatsheets/">RStudio
cheat sheets</a></li>
<li><a href="http://www.cookbook-r.com/">Cookbook for R</a></li>
<li>Read more about using the Source window to edit and execute code <a
href="https://support.posit.co/hc/en-us/articles/200484448-Editing-and-Executing-Code-in-the-RStudio-IDE">here</a>.</li>
</ul>
</div>
<div id="cited-references" class="section level3">
<h3>Cited References</h3>
<div id="refs" class="references csl-bib-body hanging-indent"
entry-spacing="0">
<div id="ref-NEON-soilCO2" class="csl-entry">
National Ecological Observatory Network (NEON). 2023a. <span>“Soil CO2
Concentration (DP1.00095.001).”</span> National Ecological Observatory
Network (NEON). <a
href="https://doi.org/10.48443/BDGB-5V03">https://doi.org/10.48443/BDGB-5V03</a>.
</div>
<div id="ref-NEON-soiltemp" class="csl-entry">
———. 2023b. <span>“Soil Temperature (DP1.00041.001).”</span> National
Ecological Observatory Network (NEON). <a
href="https://doi.org/10.48443/9G10-EP60">https://doi.org/10.48443/9G10-EP60</a>.
</div>
<div id="ref-swc-reproducible-lesson" class="csl-entry">
Zimmerman, Naupaka, Greg Wilson, Raniere Silva, Scott Ritchie, François
Michonneau, Jeffrey Oliver, Harriet Dashnow, et al. 2019. <span>“<span
class="nocase">swcarpentry/r-novice-gapminder: Software Carpentry: R for
Reproducible Scientific Analysis, June 2019</span>.”</span> Zenodo. <a
href="https://doi.org/10.5281/zenodo.3265164">https://doi.org/10.5281/zenodo.3265164</a>.
</div>
</div>
<!-- javascript that formats solution blocks clickable hidden text -->
</div>
</div>
</div>

<hr>
<p>Introduction to Computing in R with NEON</p>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
