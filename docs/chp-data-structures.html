<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>chp-data-structures.knit</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="computer-setup.html">Computer Setup</a>
</li>
<li>
  <a href="NEON-data-intro.html">NEON Data</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Chapters
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="00-module-contents.html">Chapter overview</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Core lessons</li>
    <li>
      <a href="chp-computer-navigation.html">1. Computer navigation</a>
    </li>
    <li>
      <a href="chp-intro-to-R.html">2. Intro to R</a>
    </li>
    <li>
      <a href="chp-spreadsheets.html">3. Spreadsheets</a>
    </li>
    <li>
      <a href="chp-data-structures.html">4. Data structures</a>
    </li>
    <li>
      <a href="chp-functions.html">5. Functions</a>
    </li>
    <li>
      <a href="chp-ggplot2-part1.html">6. Intro to ggplot2</a>
    </li>
    <li>
      <a href="chp-program-flow.html">7. Program flow</a>
    </li>
    <li>
      <a href="chp-ggplot2-part2.html">8. More ggplot2</a>
    </li>
    <li>
      <a href="chp-tidyverse-basics.html">9. Tidy data</a>
    </li>
  </ul>
</li>
<li>
  <a href="exercises-guide.html">Exercises</a>
</li>
<li>
  <a href="download-student-RStudio-project.html">RStudio Workbook</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<div id="chapter-4.-data-structures-and-operations"
class="section level1 tabset">
<h1 class="tabset">Chapter 4. Data structures and operations</h1>
<div id="overview" class="section level2">
<h2>Overview</h2>
<blockquote>
<p>Biology generates BIG data. But, spreadsheet programs just aren’t
equipped to process data tables consisting of millions of rows. Luckily,
R can handle data of any size and this lesson will give you the tools
the get started answering your BIG questions.</p>
</blockquote>
<div id="what-we-will-learn" class="section level3">
<h3>What we will learn</h3>
<p>In this lesson learners will:</p>
<ul>
<li>differentiate between the main data structures and types in R</li>
<li>manipulate and extract values from data structures using base R</li>
</ul>
<div id="key-terms-commands" class="section level4">
<h4>Key Terms &amp; Commands</h4>
<ul>
<li>data type</li>
<li>object class</li>
<li>factor and levels</li>
<li>vector vs. list</li>
<li>matrix vs. data frame</li>
<li>indexing with <code>[ ]</code>, <code>[[ ]]</code>,
<code>[ , ]</code></li>
<li><code>typeof()</code>, <code>class()</code>, <code>str()</code></li>
<li><code>factor()</code>, <code>levels()</code></li>
<li><code>matrix()</code></li>
<li><code>list()</code></li>
<li><code>names()</code>, <code>colnames()</code>,
<code>rownames()</code>, <code>dimnames()</code></li>
<li><code>length()</code>, <code>nrow()</code>, <code>ncol()</code></li>
<li><code>rbind()</code> and <code>cbind()</code></li>
<li><code>subset()</code></li>
<li><code>as.numeric()</code></li>
<li><code>is.na()</code></li>
</ul>
</div>
</div>
<div id="prerequisites" class="section level3">
<h3>Prerequisites</h3>
<p>Before beginning this lesson you should have completed the lessons <a
href="chp-computer-navigation.html">Navigating your computer</a> and <a
href="chp-intro-to-R.html">Intro to R and RStudio</a>.</p>
<p>Before you begin:</p>
<ol style="list-style-type: decimal">
<li>Open the R-course-NEON-workbook RStudio project.</li>
<li>Create a new R script named lesson_04_code.R in the lesson-code
folder of the student workbook.</li>
<li>Whenever you see a box</li>
</ol>
<div class="challenge">
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>Type this code into your R script.</span></code></pre></div>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Be sure to click Save often to save your work.</li>
</ol>
</div>
</div>
<div id="lesson" class="section level2">
<h2>Lesson</h2>
<p>In this lesson we will be using R to work with data from NEON’s
Teakettle Creek aquatic site. Data come from the downstream sensor
location and include information on surface water temperature (<a
href="https://data.neonscience.org/data-products/DP1.20053.001">DP1.20053.001</a>),
nitrate <a
href="https://data.neonscience.org/data-products/DP1.20033.001">DP1.20033.001</a>
and water quality (<a
href="https://data.neonscience.org/data-products/DP1.20288.001">DP1.20288.001</a>).
Data were downloaded and summarized into a table which is located in the
student workbook project:
<code>data/NEON_water/surfwater_30min_avg_TECR_2021-04_2021-10.csv</code>.</p>
<p>Let’s begin by reading these data into R.</p>
<div class="challenge">
<p>Use the <code>read.csv()</code> function to read the
<code>surfwater_30min_avg_TECR_2021-04_2021-10.csv</code> file into a
data frame named <code>surfwater</code>.</p>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Load the NEON surface water data from TEAK site</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>surfwater <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/NEON_water/surfwater_30min_avg_TECR_2021-04_2021-10.csv&quot;</span>)</span></code></pre></div>
<p>NOTE: Remember to include the relative path to the file from the
project working directory. The path to the file needs to be in quotes
(““).</p>
</div>
</details>
</div>
<p><br></p>
<div id="basic-data-types-in-r" class="section level3">
<h3>Basic data types in R</h3>
<p>In computer science, data come in several different types based on
their quantitative or qualitative properties and how the computer stores
their values. R uses several different <strong>data types</strong> which
you should be aware of:</p>
<ul>
<li><strong>integer</strong> = the countable numbers (e.g. 1, 2, 3,
…)</li>
<li><strong>double</strong> = numbers stored as a decimal
approximation</li>
<li><strong>character</strong> = text</li>
<li><strong>logical</strong> = data that can only be either
<code>TRUE</code> or <code>FALSE</code> (computed and stored as
<code>1</code> or <code>0</code>)</li>
<li><strong>complex</strong> = a complex number with an imaginary part
(e.g. <code>2+4i</code>)</li>
</ul>
<p>We can check the type of data in an object using the
<code>typeof()</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>[1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">typeof</span>(<span class="sc">-</span><span class="fl">3.4</span>)</span></code></pre></div>
<pre><code>[1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span></code></pre></div>
<pre><code>[1] &quot;logical&quot;</code></pre>
<p>In the lesson <a href="chp-intro-to-R.html">Intro to R and
RStudio</a>, we learned that a <strong>vector</strong> is an ordered set
of values that are all of the same type. We also learned that the
columns of a <strong>data frame</strong> are vectors. Let’s see how this
works.</p>
<p>In the Environment panel, click on the blue arrow next to
<code>surfwater</code>. Notice that each column name appears as
<code>$ columnname</code> followed by a <code>:</code> and then
information about the data type of each column and the first few
entries.</p>
<div class="challenge">
<p>What is the data type of the <code>siteID</code> column? What is the
data type of the <code>pH.mean</code> column? How could you check?</p>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<p>Remember that to access a column of a data frame we can use the
<code>$</code> symbol:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Print the type of data in the siteID column</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">typeof</span>(surfwater<span class="sc">$</span>siteID)</span></code></pre></div>
<pre><code>[1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Print the type of data in the pH.mean column</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">typeof</span>(surfwater<span class="sc">$</span>pH.mean)</span></code></pre></div>
<pre><code>[1] &quot;double&quot;</code></pre>
</div>
</details>
</div>
<p><br></p>
<p>Let’s explore vectors a bit more. Let’s take the first 10 values in
the <code>pH.mean</code> column and assign them to a new vector:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Select values 1 - 10 of the pH.mean column in surfwater</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>pH_top10 <span class="ot">&lt;-</span> surfwater<span class="sc">$</span>pH.mean[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<p>Suppose we discover that the first value of this vector is invalid
and need to replace it with a missing value (<code>NA</code>). Do you
think this will change the type of data in the vector?</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>pH_top10[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>pH_top10</span></code></pre></div>
<pre><code> [1]       NA 7.248333 7.240000 7.232333 7.230333 7.229333 7.229333 7.229667
 [9] 7.227667 7.223667</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">typeof</span>(pH_top10)</span></code></pre></div>
<pre><code>[1] &quot;double&quot;</code></pre>
<p>The data type stays the same. Now what do you think will happen if we
replace the first value with something more ambiguous:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>pH_top10[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;7.2 or 7.3&quot;</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>pH_top10</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="fu">typeof</span>(pH_top10)</span></code></pre></div>
<details>
<summary>
Answer:
</summary>
<pre><code> [1] &quot;7.2 or 7.3&quot;       &quot;7.24833333333333&quot; &quot;7.24&quot;             &quot;7.23233333333333&quot;
 [5] &quot;7.23033333333333&quot; &quot;7.22933333333333&quot; &quot;7.22933333333333&quot; &quot;7.22966666666667&quot;
 [9] &quot;7.22766666666667&quot; &quot;7.22366666666667&quot;</code></pre>
<pre><code>[1] &quot;character&quot;</code></pre>
<p>The vector now has type character because all elements in the vector
must have the same data type and “7.2 or 7.3” is not a number.</p>
</details>
<p><br></p>
<p>If you every come across a vector that you think should be numeric
(e.g. an integer or double data type), but is interpreted as character
data, you can use the <code>as.numeric()</code> function to
<strong>coerce</strong> the vector to be a numeric data type. R will try
to interpret the text as a number and if it can’t it will produce
<code>NA</code>. This can be useful for identifying data errors and
typos.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">as.numeric</span>(pH_top10)</span></code></pre></div>
<pre><code>Warning: NAs introduced by coercion</code></pre>
<pre><code> [1]       NA 7.248333 7.240000 7.232333 7.230333 7.229333 7.229333 7.229667
 [9] 7.227667 7.223667</code></pre>
<p>The output warns us that coercing to a numeric vector created missing
values. The new numeric vector shows us that the first element was not a
number, but the rest of the data were.</p>
<div class="callout-tip">
<p>At some point you may come across a strange value in a vector that
you thought contained numeric data:</p>
<ul>
<li><code>Inf</code> = positive infinity</li>
<li><code>-Inf</code> = negative infinity</li>
<li><code>NaN</code> = not a number (undefined)</li>
</ul>
<p>These can be good warning signs that you calculations involve 0 or
are potentially not doing what you thought they should be doing:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">4</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>[1] -4 -3 -2 -1  0  1  2  3  4</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>x<span class="sc">/</span><span class="dv">0</span></span></code></pre></div>
<pre><code>[1] -Inf -Inf -Inf -Inf  NaN  Inf  Inf  Inf  Inf</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>x<span class="sc">/</span>x</span></code></pre></div>
<pre><code>[1]   1   1   1   1 NaN   1   1   1   1</code></pre>
</div>
</div>
<div id="common-data-objects-in-r" class="section level3">
<h3>Common data objects in R</h3>
<p>We have already learned about two ways that R stores data: vectors
and data frames. Each of these is a <strong>class</strong> of objects.
In computer science, an object’s class determines what kinds of things
you can do with it. For example, since vectors are ordered we can select
individual elements from them using integer
<strong>indices</strong>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="co"># Print the second element in the vector</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>pH_top10[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>[1] &quot;7.24833333333333&quot;</code></pre>
<p>You can find out the class of an object using the
<code>class()</code> function.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">class</span>(pH_top10)</span></code></pre></div>
<pre><code>[1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">class</span>(surfwater<span class="sc">$</span>pH.mean)</span></code></pre></div>
<pre><code>[1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">class</span>(surfwater)</span></code></pre></div>
<pre><code>[1] &quot;data.frame&quot;</code></pre>
<p>That’s interesting: note that the class of a vector isn’t “vector”,
but the type of the data stored in it.</p>
<div id="factors" class="section level4">
<h4>Factors</h4>
<p>A factor is a type of vector whose data are categorical. More
specifically, the elements come from a finite set of values called
<strong>levels</strong>. For example, in the small mammal data in lesson
<a href="chp-spreadsheets.html">Data organization in spreadsheets</a>,
the sex of the rodents was only male or female. Factors come up quite
often in R, so it is important to understand how factors store data.</p>
<p>In the <code>surfwater</code> data frame, the <code>siteID</code>
column identifies the NEON site where the data are collected. This
column is currently a character vector, but it would be reasonable to
convert it to a factor since there are only a finite number of distinct
sites that data could come from.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="co"># Create a new vector containing the first 10 values of the siteID column</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>sites <span class="ot">&lt;-</span> surfwater<span class="sc">$</span>siteID[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="co"># View the contents of the vector and its class</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a>sites</span></code></pre></div>
<pre><code> [1] &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot;</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="fu">class</span>(sites)</span></code></pre></div>
<pre><code>[1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="co"># Convert to a factor</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">factor</span>(sites)</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a><span class="co"># View the contents of the factor and its class</span></span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a>sites</span></code></pre></div>
<pre><code> [1] TECR TECR TECR TECR TECR TECR TECR TECR TECR TECR
Levels: TECR</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="fu">class</span>(sites)</span></code></pre></div>
<pre><code>[1] &quot;factor&quot;</code></pre>
<p>The data now have class “factor” instead of “character” and the
elements are no longer surrounded by quotes. We also see that this
factor has one level (i.e. one possible value) which is
<code>TECR</code>.</p>
<p>What happens if we try to add a new element with a different value
onto this factor?</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="co"># Concatenate a new value to the end of sites</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>sites2 <span class="ot">&lt;-</span> <span class="fu">c</span>(sites, <span class="st">&quot;ABCD&quot;</span>)</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>sites2</span></code></pre></div>
<pre><code> [1] &quot;1&quot;    &quot;1&quot;    &quot;1&quot;    &quot;1&quot;    &quot;1&quot;    &quot;1&quot;    &quot;1&quot;    &quot;1&quot;    &quot;1&quot;    &quot;1&quot;   
[11] &quot;ABCD&quot;</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">class</span>(sites2)</span></code></pre></div>
<pre><code>[1] &quot;character&quot;</code></pre>
<p>The factor was converted back to a character vector to match the type
of data we added (<code>"ABCD"</code>). But, where did the
<code>"1"</code> come from?</p>
<p>The most important thing to remember about factors is that the values
in the vector are actually integers, with each integer corresponding to
a level. The labels for the levels are saved in an attribute of the
factor and can be accessed using the function <code>levels()</code>.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="co"># Create a factor with a new set of sites</span></span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;TECR&quot;</span>, <span class="st">&quot;TECR&quot;</span>, <span class="st">&quot;TECR&quot;</span>, <span class="st">&quot;ABCD&quot;</span>))</span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a><span class="co"># View the contents of sites</span></span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a>sites</span></code></pre></div>
<pre><code>[1] TECR TECR TECR ABCD
Levels: ABCD TECR</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="co"># Print the levels of the factor</span></span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="fu">levels</span>(sites)</span></code></pre></div>
<pre><code>[1] &quot;ABCD&quot; &quot;TECR&quot;</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="co"># View the underlying integer values in the factor by converting it to an integer</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a><span class="fu">as.integer</span>(sites)</span></code></pre></div>
<pre><code>[1] 2 2 2 1</code></pre>
<p>By default, R will alphabetize a character vector before assigning
levels, so even though <code>"TECR"</code> came first in the vector,
<code>"ABCD"</code> comes first alphabetically and was assigned to the
first level.</p>
<p>You can change the default levels after creating a vector using the
<code>levels()</code> function.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="co"># Change the levels in sites</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a><span class="fu">levels</span>(sites) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;TECR&quot;</span>, <span class="st">&quot;ABCD&quot;</span>)</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a>sites</span></code></pre></div>
<pre><code>[1] ABCD ABCD ABCD TECR
Levels: TECR ABCD</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="fu">as.integer</span>(sites)</span></code></pre></div>
<pre><code>[1] 2 2 2 1</code></pre>
<p>Or, you can define the levels of a factor when you initially create
it.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="co"># Define a new factor containing sites names</span></span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;TECR&quot;</span>, <span class="st">&quot;TECR&quot;</span>, <span class="st">&quot;TECR&quot;</span>, <span class="st">&quot;ABCD&quot;</span>), <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;TECR&quot;</span>, <span class="st">&quot;ABCD&quot;</span>, <span class="st">&quot;GGGG&quot;</span>))</span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a>sites</span></code></pre></div>
<pre><code>[1] TECR TECR TECR ABCD
Levels: TECR ABCD GGGG</code></pre>
<p>Note that a factor can contain levels that don’t actually appear in
the data.</p>
<p>Factors and their levels become important if you need to do make
graphs with or do statistics on categorical data.</p>
</div>
<div id="vectors-vs.-lists" class="section level4">
<h4>Vectors vs. lists</h4>
<p>Vectors are great for handling data, but what if you need to combine
values that are not the same data type? That’s where a
<strong>list</strong> becomes useful. A list is an ordered set of values
or objects that do not need to have the same data type. You can create a
list using the <code>list()</code> function.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>sitelist <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;TECR&quot;</span>, <span class="st">&quot;ABCD&quot;</span>, <span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">100</span>)</span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a>sitelist</span></code></pre></div>
<pre><code>[[1]]
[1] &quot;TECR&quot;

[[2]]
[1] &quot;ABCD&quot;

[[3]]
[1] 7 8 9

[[4]]
[1] 100</code></pre>
<p><code>sitelist</code> has four elements: the first two are each
character vectors with one element, the third element is an integer
vector with the numbers 7 - 9, and the fourth element of the list is a
numeric vector with one element (100).</p>
<p>Vectors and lists are both one-dimensional and contain a finite
number of elements, also known as their <strong>length</strong>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="fu">length</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>Because vectors and lists are one-dimensional, we can access their
elements using integer indices (e.g. the 1st, 2nd, 3rd, 4th, … etc
element). The way to index differs between vectors and lists. We use a
single set of brackets <code>[ ]</code> to access the elements of a
vector and a double set of brackets <code>[[ ]]</code>to access the
elements of a list.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a><span class="co"># Access the third element of sitelist</span></span>
<span id="cb68-2"><a href="#cb68-2" tabindex="-1"></a>sitelist[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>[1] 7 8 9</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a><span class="co"># Access the first element of the vector in the third element of sitelist</span></span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a>sitelist[[<span class="dv">3</span>]][<span class="dv">1</span>]</span></code></pre></div>
<pre><code>[1] 7</code></pre>
<div class="challenge">
<p>Figure out how each of these lists differ using the
<code>length()</code> function:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb72-4"><a href="#cb72-4" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a><span class="co"># This is a list with three elements: the numbers 1, 2, and 3</span></span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a>x </span></code></pre></div>
<pre><code>[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="co"># This is a list with one element: a vector with the numbers 1, 2 and 3</span></span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>[[1]]
[1] 1 2 3</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="fu">length</span>(y)</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a><span class="co"># This is a list with two elements: the number 1 is the first element and a vector with</span></span>
<span id="cb81-2"><a href="#cb81-2" tabindex="-1"></a><span class="co"># the numbers 2 and 3 is the second element</span></span>
<span id="cb81-3"><a href="#cb81-3" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>[[1]]
[1] 1

[[2]]
[1] 2 3</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a><span class="fu">length</span>(z)</span></code></pre></div>
<pre><code>[1] 2</code></pre>
</div>
</details>
</div>
<p><br></p>
<div class="challenge">
<ol style="list-style-type: decimal">
<li><p>Which one of these works? Why?</p></li>
<li><p>For the line that works, did it return what you expected? What
would need to change?</p></li>
</ol>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a>sitelist[<span class="dv">1</span>][<span class="dv">3</span>]</span>
<span id="cb85-2"><a href="#cb85-2" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" tabindex="-1"></a>sitelist[<span class="dv">3</span>][<span class="dv">1</span>]</span></code></pre></div>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<p>This doesn’t work because it returns a list of length 1 and we cannot
select a 3rd element because it does not exist.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" tabindex="-1"></a>sitelist[<span class="dv">1</span>][<span class="dv">3</span>]</span></code></pre></div>
<pre><code>[[1]]
NULL</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" tabindex="-1"></a><span class="fu">class</span>(sitelist[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>[1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" tabindex="-1"></a><span class="fu">length</span>(sitelist[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>This works, because <code>sitelist[3]</code> returns a list of length
1 and so selecting the 1st element returns the whole list.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" tabindex="-1"></a>sitelist[<span class="dv">3</span>][<span class="dv">1</span>]</span></code></pre></div>
<pre><code>[[1]]
[1] 7 8 9</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" tabindex="-1"></a><span class="fu">class</span>(sitelist[<span class="dv">3</span>])</span></code></pre></div>
<pre><code>[1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" tabindex="-1"></a><span class="fu">length</span>(sitelist[<span class="dv">3</span>])</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>If we actually wanted the 1st element from the vector saved as the
third element of sitelist, we would actually need to use:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" tabindex="-1"></a>sitelist[[<span class="dv">3</span>]][<span class="dv">1</span>]</span></code></pre></div>
<pre><code>[1] 7</code></pre>
</div>
</details>
</div>
<p><br></p>
<p>Whenever you lose track of what is contained in an object, it is
useful to examine the object’s structure using the <code>str()</code>
function. Let’s see how this works on one of the lists we made:</p>
<div class="sourceCode" id="cb100"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" tabindex="-1"></a><span class="co"># What is the structure of the object sitelist</span></span>
<span id="cb100-2"><a href="#cb100-2" tabindex="-1"></a><span class="fu">str</span>(sitelist)</span></code></pre></div>
<pre><code>List of 4
 $ : chr &quot;TECR&quot;
 $ : chr &quot;ABCD&quot;
 $ : int [1:3] 7 8 9
 $ : num 100</code></pre>
<p>We see that it is a list with 4 elements and each of these elements
are then summarized.</p>
</div>
<div id="matrices-vs.-dataframes" class="section level4">
<h4>Matrices vs. Dataframes</h4>
<p>Now that we are starting to understand the two main one-dimensional
data objects in R (vectors and lists) we can talk about two-dimensional
data objects. We’ve already seen one of these- the <strong>data
frame</strong>. A data frame is a special type of list!</p>
<p>A data frame is a list of vectors that all have the same length, but
the vectors can have different data types from each other. This makes it
a very flexible and useful way to work with data tables.</p>
<p>Let’s check out the structure of the <code>surfwater</code>
dataframe.</p>
<div class="sourceCode" id="cb102"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" tabindex="-1"></a><span class="fu">str</span>(surfwater)</span></code></pre></div>
<pre><code>&#39;data.frame&#39;:   10272 obs. of  11 variables:
 $ siteID                  : chr  &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; ...
 $ startDateTime           : chr  &quot;2021-04-01 00:00:00&quot; &quot;2021-04-01 00:30:00&quot; &quot;2021-04-01 01:00:00&quot; &quot;2021-04-01 01:30:00&quot; ...
 $ endDateTime             : chr  &quot;2021-04-01 00:30:00&quot; &quot;2021-04-01 01:00:00&quot; &quot;2021-04-01 01:30:00&quot; &quot;2021-04-01 02:00:00&quot; ...
 $ surfWaterTemp.mean      : num  3.79 3.71 3.58 3.42 3.26 ...
 $ surfWaterNitrate.mean   : num  2.05 2.1 2.15 2.2 2.25 2.3 2.3 2.3 2.3 2.3 ...
 $ specificConductance.mean: num  27.4 27.4 27.3 27.4 27.4 ...
 $ dissolvedOxygen.mean    : num  10.4 10.4 10.4 10.5 10.5 ...
 $ pH.mean                 : num  7.25 7.25 7.24 7.23 7.23 ...
 $ chlorophyll.mean        : num  0.692 0.732 0.77 0.814 0.806 ...
 $ turbidity.mean          : num  0.967 1.211 1.542 1.615 1.51 ...
 $ fDOM.mean               : num  35.3 35.7 36.2 36.7 36.9 ...</code></pre>
<p>We can see that it is a data frame with 10272 rows and 11 columns.
The names of the columns are given after the <code>$</code> symbol,
along with a preview of their contents. This is very similar in
structure to the output when we used <code>str()</code> on a list. The
main difference is that each element in this list has a
<strong>name</strong> which is the name of the column.</p>
<div class="sourceCode" id="cb104"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" tabindex="-1"></a><span class="co"># What are the names of the elements in surfwater?</span></span>
<span id="cb104-2"><a href="#cb104-2" tabindex="-1"></a><span class="fu">names</span>(surfwater)</span></code></pre></div>
<pre><code> [1] &quot;siteID&quot;                   &quot;startDateTime&quot;           
 [3] &quot;endDateTime&quot;              &quot;surfWaterTemp.mean&quot;      
 [5] &quot;surfWaterNitrate.mean&quot;    &quot;specificConductance.mean&quot;
 [7] &quot;dissolvedOxygen.mean&quot;     &quot;pH.mean&quot;                 
 [9] &quot;chlorophyll.mean&quot;         &quot;turbidity.mean&quot;          
[11] &quot;fDOM.mean&quot;               </code></pre>
<div class="sourceCode" id="cb106"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" tabindex="-1"></a><span class="co"># What are the names of the elements in sitelist?</span></span>
<span id="cb106-2"><a href="#cb106-2" tabindex="-1"></a><span class="fu">names</span>(sitelist)</span></code></pre></div>
<pre><code>NULL</code></pre>
<p>The elements of <code>sitelist</code> don’t have names, so we get
<code>NULL</code> (an empty value).</p>
<p>We could assign names using the <code>names()</code> function. These
then show up in the structure of the object:</p>
<div class="sourceCode" id="cb108"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" tabindex="-1"></a><span class="co"># Assign names to the elements of sitelist</span></span>
<span id="cb108-2"><a href="#cb108-2" tabindex="-1"></a><span class="fu">names</span>(sitelist) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;site1&quot;</span>, <span class="st">&quot;site2&quot;</span>, <span class="st">&quot;values1&quot;</span>, <span class="st">&quot;values2&quot;</span>)</span>
<span id="cb108-3"><a href="#cb108-3" tabindex="-1"></a></span>
<span id="cb108-4"><a href="#cb108-4" tabindex="-1"></a><span class="co"># View the structure of the object</span></span>
<span id="cb108-5"><a href="#cb108-5" tabindex="-1"></a><span class="fu">str</span>(sitelist)</span></code></pre></div>
<pre><code>List of 4
 $ site1  : chr &quot;TECR&quot;
 $ site2  : chr &quot;ABCD&quot;
 $ values1: int [1:3] 7 8 9
 $ values2: num 100</code></pre>
<div class="sourceCode" id="cb110"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" tabindex="-1"></a><span class="co"># Access the element named values2</span></span>
<span id="cb110-2"><a href="#cb110-2" tabindex="-1"></a>sitelist<span class="sc">$</span>values2</span></code></pre></div>
<pre><code>[1] 100</code></pre>
<p>In summary, a data frame is a <strong>named list</strong>, which
means that we can access its named elements using the <code>$</code>
symbol: <code>dataframe$columnname</code>. However since a data frame is
also just a list, you can also access columns using <code>[[ ]]</code>,
though this is not commonly done.</p>
<div class="sourceCode" id="cb112"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" tabindex="-1"></a><span class="co"># Print the first 10 elements in the 3rd column of the surfwater data frame</span></span>
<span id="cb112-2"><a href="#cb112-2" tabindex="-1"></a>surfwater[[<span class="dv">3</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code> [1] &quot;2021-04-01 00:30:00&quot; &quot;2021-04-01 01:00:00&quot; &quot;2021-04-01 01:30:00&quot;
 [4] &quot;2021-04-01 02:00:00&quot; &quot;2021-04-01 02:30:00&quot; &quot;2021-04-01 03:00:00&quot;
 [7] &quot;2021-04-01 03:30:00&quot; &quot;2021-04-01 04:00:00&quot; &quot;2021-04-01 04:30:00&quot;
[10] &quot;2021-04-01 05:00:00&quot;</code></pre>
<p>In contrast, a <strong>matrix</strong> is like a 2-dimensional
vector- all of the elements must have the same data type. One way to
make a matrix is by using the <code>matrix()</code> function:</p>
<div class="sourceCode" id="cb114"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" tabindex="-1"></a><span class="co"># Make a 2 x 3 matrix filled with the numbers 10 - 15 </span></span>
<span id="cb114-2"><a href="#cb114-2" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb114-3"><a href="#cb114-3" tabindex="-1"></a></span>
<span id="cb114-4"><a href="#cb114-4" tabindex="-1"></a>X</span></code></pre></div>
<pre><code>     [,1] [,2] [,3]
[1,]   10   12   14
[2,]   11   13   15</code></pre>
<p>We access the elements of a matrix using single square brackets with
a comma to denote the row and column we need: <code>X[r, c]</code>.</p>
<div class="sourceCode" id="cb116"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" tabindex="-1"></a>X[<span class="dv">2</span>, <span class="dv">3</span>] <span class="co"># the element in the second row and third column</span></span></code></pre></div>
<pre><code>[1] 15</code></pre>
<div class="sourceCode" id="cb118"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" tabindex="-1"></a>X[, <span class="dv">2</span>] <span class="co"># the second column</span></span></code></pre></div>
<pre><code>[1] 12 13</code></pre>
<div class="sourceCode" id="cb120"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" tabindex="-1"></a>X[<span class="dv">1</span>, ] <span class="co"># the first row</span></span></code></pre></div>
<pre><code>[1] 10 12 14</code></pre>
<div class="sourceCode" id="cb122"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" tabindex="-1"></a>X[<span class="dv">2</span>,] <span class="co"># spaces don&#39;t matter!</span></span></code></pre></div>
<pre><code>[1] 11 13 15</code></pre>
<div class="sourceCode" id="cb124"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" tabindex="-1"></a>X[ <span class="dv">2</span>  ,   ]</span></code></pre></div>
<pre><code>[1] 11 13 15</code></pre>
<p>We can also the same method to access elements in a data frame.</p>
<div class="sourceCode" id="cb126"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" tabindex="-1"></a>surfwater[<span class="dv">2</span>, <span class="dv">3</span>] <span class="co"># the element in the second row and third column</span></span></code></pre></div>
<pre><code>[1] &quot;2021-04-01 01:00:00&quot;</code></pre>
<div class="sourceCode" id="cb128"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" tabindex="-1"></a>surfwater[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">5</span>] <span class="co"># the first 10 elements in the fifth column</span></span></code></pre></div>
<pre><code> [1] 2.05 2.10 2.15 2.20 2.25 2.30 2.30 2.30 2.30 2.30</code></pre>
<div class="sourceCode" id="cb130"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" tabindex="-1"></a>surfwater[<span class="dv">3</span>, ] <span class="co"># the third row</span></span></code></pre></div>
<pre><code>  siteID       startDateTime         endDateTime surfWaterTemp.mean
3   TECR 2021-04-01 01:00:00 2021-04-01 01:30:00              3.582
  surfWaterNitrate.mean specificConductance.mean dissolvedOxygen.mean pH.mean
3                  2.15                 27.34967               10.419    7.24
  chlorophyll.mean turbidity.mean fDOM.mean
3        0.7696667          1.542    36.229</code></pre>
<div class="challenge">
<p>What class of object is returned by each of the commands above?</p>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb132"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" tabindex="-1"></a><span class="fu">class</span>(surfwater[<span class="dv">2</span>, <span class="dv">3</span>]) <span class="co"># a character vector</span></span></code></pre></div>
<pre><code>[1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb134"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" tabindex="-1"></a><span class="fu">class</span>(surfwater[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">5</span>]) <span class="co"># a numeric vector</span></span></code></pre></div>
<pre><code>[1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb136"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" tabindex="-1"></a><span class="fu">class</span>(surfwater[<span class="dv">3</span>, ]) <span class="co"># a data frame</span></span></code></pre></div>
<pre><code>[1] &quot;data.frame&quot;</code></pre>
</div>
</details>
</div>
<p><br></p>
<p>Matrices and data frames can have column and row names that make it
easier to access their elements. You can set or view the column names
and rownames of a matrix using <code>colnames()</code> and
<code>rownames()</code></p>
<div class="sourceCode" id="cb138"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" tabindex="-1"></a><span class="co"># Set the row names of X</span></span>
<span id="cb138-2"><a href="#cb138-2" tabindex="-1"></a><span class="fu">rownames</span>(X) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>)</span>
<span id="cb138-3"><a href="#cb138-3" tabindex="-1"></a></span>
<span id="cb138-4"><a href="#cb138-4" tabindex="-1"></a><span class="co"># Set the column names of X</span></span>
<span id="cb138-5"><a href="#cb138-5" tabindex="-1"></a><span class="fu">colnames</span>(X) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>)</span>
<span id="cb138-6"><a href="#cb138-6" tabindex="-1"></a></span>
<span id="cb138-7"><a href="#cb138-7" tabindex="-1"></a><span class="co"># Print the contents of X</span></span>
<span id="cb138-8"><a href="#cb138-8" tabindex="-1"></a>X</span></code></pre></div>
<pre><code>  one two three
A  10  12    14
B  11  13    15</code></pre>
<div class="sourceCode" id="cb140"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" tabindex="-1"></a><span class="co"># View the structure of X</span></span>
<span id="cb140-2"><a href="#cb140-2" tabindex="-1"></a><span class="fu">str</span>(X)</span></code></pre></div>
<pre><code> int [1:2, 1:3] 10 11 12 13 14 15
 - attr(*, &quot;dimnames&quot;)=List of 2
  ..$ : chr [1:2] &quot;A&quot; &quot;B&quot;
  ..$ : chr [1:3] &quot;one&quot; &quot;two&quot; &quot;three&quot;</code></pre>
<p>In a data frame, you can use <code>names()</code> or
<code>colnames()</code> to access the column names.</p>
<div class="sourceCode" id="cb142"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" tabindex="-1"></a><span class="co"># View the column names of surfwater</span></span>
<span id="cb142-2"><a href="#cb142-2" tabindex="-1"></a><span class="fu">colnames</span>(surfwater)</span></code></pre></div>
<pre><code> [1] &quot;siteID&quot;                   &quot;startDateTime&quot;           
 [3] &quot;endDateTime&quot;              &quot;surfWaterTemp.mean&quot;      
 [5] &quot;surfWaterNitrate.mean&quot;    &quot;specificConductance.mean&quot;
 [7] &quot;dissolvedOxygen.mean&quot;     &quot;pH.mean&quot;                 
 [9] &quot;chlorophyll.mean&quot;         &quot;turbidity.mean&quot;          
[11] &quot;fDOM.mean&quot;               </code></pre>
<p>Column and row names make it easier to extract data from matrices and
dataframes because you don’t need to remember which row or column the
data you need are in. Instead of using an integer index to access a
value, you can use the name of the column(s) or row(s) in quotes.</p>
<div class="sourceCode" id="cb144"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" tabindex="-1"></a><span class="co"># Access the row named &quot;B&quot; in X </span></span>
<span id="cb144-2"><a href="#cb144-2" tabindex="-1"></a>X[<span class="st">&quot;B&quot;</span>, ]</span></code></pre></div>
<pre><code>  one   two three 
   11    13    15 </code></pre>
<p>If you want more than one column or row, supply a vector containing
the column or row names.</p>
<div class="sourceCode" id="cb146"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" tabindex="-1"></a><span class="co"># Access the first 3 rows from the pH and temperature columns</span></span>
<span id="cb146-2"><a href="#cb146-2" tabindex="-1"></a>surfwater[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(<span class="st">&quot;pH.mean&quot;</span>, <span class="st">&quot;surfWaterTemp.mean&quot;</span>)]</span></code></pre></div>
<pre><code>   pH.mean surfWaterTemp.mean
1 7.252000              3.792
2 7.248333              3.712
3 7.240000              3.582</code></pre>
<p>We can append rows and columns to matrices and data frames using
<code>rbind()</code> and <code>cbind()</code>.</p>
<div class="sourceCode" id="cb148"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" tabindex="-1"></a><span class="co"># Append a column of NA values to X</span></span>
<span id="cb148-2"><a href="#cb148-2" tabindex="-1"></a><span class="fu">cbind</span>(X, <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>  one two three   
A  10  12    14 NA
B  11  13    15 NA</code></pre>
<div class="sourceCode" id="cb150"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" tabindex="-1"></a><span class="co"># Append the rows of X to itself</span></span>
<span id="cb150-2"><a href="#cb150-2" tabindex="-1"></a><span class="fu">rbind</span>(X, X)</span></code></pre></div>
<pre><code>  one two three
A  10  12    14
B  11  13    15
A  10  12    14
B  11  13    15</code></pre>
<div class="challenge">
<p>What is the contents of the matrix <code>X</code> after running the
previous two lines of code?</p>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb152"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" tabindex="-1"></a>X</span></code></pre></div>
<pre><code>  one two three
A  10  12    14
B  11  13    15</code></pre>
<p><code>X</code> hasn’t changed! This is because we did not assign the
results of <code>cbind()</code> and <code>rbind()</code> to an objects
so the results just printed in the console. If we actually wanted to
modify the matrix <code>X</code> we would need to use the assignment
operator <code>&lt;-</code>.</p>
<div class="sourceCode" id="cb154"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">cbind</span>(X, <span class="cn">NA</span>)</span>
<span id="cb154-2"><a href="#cb154-2" tabindex="-1"></a></span>
<span id="cb154-3"><a href="#cb154-3" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">rbind</span>(X, X)</span>
<span id="cb154-4"><a href="#cb154-4" tabindex="-1"></a></span>
<span id="cb154-5"><a href="#cb154-5" tabindex="-1"></a>X</span></code></pre></div>
<pre><code>  one two three   
A  10  12    14 NA
B  11  13    15 NA
A  10  12    14 NA
B  11  13    15 NA</code></pre>
</div>
</details>
</div>
<p><br></p>
<p><code>cbind()</code> and <code>rbind()</code> also work for data
frames.</p>
<div class="sourceCode" id="cb156"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" tabindex="-1"></a><span class="co"># Make a new data frame that contains the first 5 rows of surfwater duplicated</span></span>
<span id="cb156-2"><a href="#cb156-2" tabindex="-1"></a><span class="fu">rbind</span>(surfwater[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,], surfwater[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,])</span></code></pre></div>
<pre><code>   siteID       startDateTime         endDateTime surfWaterTemp.mean
1    TECR 2021-04-01 00:00:00 2021-04-01 00:30:00              3.792
2    TECR 2021-04-01 00:30:00 2021-04-01 01:00:00              3.712
3    TECR 2021-04-01 01:00:00 2021-04-01 01:30:00              3.582
4    TECR 2021-04-01 01:30:00 2021-04-01 02:00:00              3.423
5    TECR 2021-04-01 02:00:00 2021-04-01 02:30:00              3.258
6    TECR 2021-04-01 00:00:00 2021-04-01 00:30:00              3.792
7    TECR 2021-04-01 00:30:00 2021-04-01 01:00:00              3.712
8    TECR 2021-04-01 01:00:00 2021-04-01 01:30:00              3.582
9    TECR 2021-04-01 01:30:00 2021-04-01 02:00:00              3.423
10   TECR 2021-04-01 02:00:00 2021-04-01 02:30:00              3.258
   surfWaterNitrate.mean specificConductance.mean dissolvedOxygen.mean  pH.mean
1                   2.05                 27.39500             10.36000 7.252000
2                   2.10                 27.35267             10.38167 7.248333
3                   2.15                 27.34967             10.41900 7.240000
4                   2.20                 27.36433             10.46733 7.232333
5                   2.25                 27.38633             10.51767 7.230333
6                   2.05                 27.39500             10.36000 7.252000
7                   2.10                 27.35267             10.38167 7.248333
8                   2.15                 27.34967             10.41900 7.240000
9                   2.20                 27.36433             10.46733 7.232333
10                  2.25                 27.38633             10.51767 7.230333
   chlorophyll.mean turbidity.mean fDOM.mean
1         0.6916667      0.9673333  35.25833
2         0.7323333      1.2106667  35.74600
3         0.7696667      1.5420000  36.22900
4         0.8136667      1.6146667  36.68633
5         0.8063333      1.5096667  36.87733
6         0.6916667      0.9673333  35.25833
7         0.7323333      1.2106667  35.74600
8         0.7696667      1.5420000  36.22900
9         0.8136667      1.6146667  36.68633
10        0.8063333      1.5096667  36.87733</code></pre>
<div class="callout-trick">
<p>Matrices are two dimensional objects where every element has the same
data type. Matrices are a special case of an <strong>array</strong>,
which is an n-dimensional object in which every element has the same
data type. You may not need to use arrays very often, but it is useful
to know they exist.</p>
<p>Create an array using <code>array(data, dim)</code>, where data
contains the values to put in the array and dim is an integer vector
specifying its dimensions. Here’s an example of a 3-dimensional array
and how to access its elements:</p>
<div class="sourceCode" id="cb158"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" tabindex="-1"></a>Z <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>))</span>
<span id="cb158-2"><a href="#cb158-2" tabindex="-1"></a></span>
<span id="cb158-3"><a href="#cb158-3" tabindex="-1"></a>Z</span></code></pre></div>
<pre><code>, , 1

     [,1] [,2] [,3]
[1,]    1    5    9
[2,]    2    6   10
[3,]    3    7   11
[4,]    4    8   12

, , 2

     [,1] [,2] [,3]
[1,]   13   17   21
[2,]   14   18   22
[3,]   15   19   23
[4,]   16   20   24</code></pre>
<div class="sourceCode" id="cb160"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" tabindex="-1"></a>Z[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>[1] 10</code></pre>
</div>
</div>
<div id="how-large-are-my-data" class="section level4">
<h4>How large are my data?</h4>
<p>RStudio has a very useful Environment panel that reports the
structure and <strong>dimensions</strong> of any object that you create.
However, sometimes you will need to use the size of your data in your
code (example to follow). This is where you might want to use the
functions:</p>
<ul>
<li><code>dim()</code> will print the dimensions of an object (number of
rows, number of columns, number of higher order dimensions)</li>
<li><code>dimnames()</code> will print the names for each dimension as a
list where the first element is the row names, the second element is the
column names and subsequent elements are higher order names.</li>
<li><code>nrow()</code> or <code>ncol()</code> will print an integer
with the number of rows or columns</li>
<li><code>rownames()</code> or <code>colnames()</code> will print a
character vector with the names of the rows or columns.</li>
</ul>
<p>The first two will work on any matrix, array or data frame, whereas
the row and column functions only work on 2-dimensional objects
(matrices and data frames).</p>
<p>Let’s see how this might be useful if we wanted to view the last five
rows of <code>surfwater</code>.</p>
<div class="sourceCode" id="cb162"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" tabindex="-1"></a><span class="co"># How many rows are in surfwater?</span></span>
<span id="cb162-2"><a href="#cb162-2" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="fu">nrow</span>(surfwater)</span>
<span id="cb162-3"><a href="#cb162-3" tabindex="-1"></a>N</span></code></pre></div>
<pre><code>[1] 10272</code></pre>
<div class="sourceCode" id="cb164"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" tabindex="-1"></a><span class="co"># Extract the last 5 rows of surfwater.</span></span>
<span id="cb164-2"><a href="#cb164-2" tabindex="-1"></a>surfwater[(N<span class="dv">-4</span>)<span class="sc">:</span>N, ]</span></code></pre></div>
<pre><code>      siteID       startDateTime         endDateTime surfWaterTemp.mean
10268   TECR 2021-10-31 21:30:00 2021-10-31 22:00:00              4.615
10269   TECR 2021-10-31 22:00:00 2021-10-31 22:30:00              4.650
10270   TECR 2021-10-31 22:30:00 2021-10-31 23:00:00              4.629
10271   TECR 2021-10-31 23:00:00 2021-10-31 23:30:00              4.629
10272   TECR 2021-10-31 23:30:00 2021-11-01 00:00:00              4.641
      surfWaterNitrate.mean specificConductance.mean dissolvedOxygen.mean
10268                  2.90                       NA                   NA
10269                  2.90                       NA                   NA
10270                  2.85                       NA                   NA
10271                  2.85                       NA                   NA
10272                  2.90                       NA                   NA
      pH.mean chlorophyll.mean turbidity.mean fDOM.mean
10268      NA               NA             NA        NA
10269      NA               NA             NA        NA
10270      NA               NA             NA        NA
10271      NA               NA             NA        NA
10272      NA               NA             NA        NA</code></pre>
</div>
</div>
<div id="logical-comparisons" class="section level3">
<h3>Logical comparisons</h3>
<p>Usually when we work with data, we don’t know exactly which row(s)
contain the values we are intersted in. For example, perhaps we want to
calculate the average surface water temperature, but only for the month
of August. To do this we would first need to identify the rows in
<code>surfwater</code> that were measured in August (presumably using
the <code>startDateTime</code> column) and then calculate the average of
the values in the <code>surfwarterTemp.mean</code> column.</p>
<p>To identify the rows from August, we need to do a <strong>logical
comparison</strong> and test whether the dates in the
<code>startDateTime</code> column come from the month of August.</p>
<p>Here are all of the basic comparison operations in R, illustrated
using a vector of integers and one missing value. Comparisons will
return a logical vector that is TRUE where the comparison is true, FALSE
where the comparison is false.</p>
<div class="sourceCode" id="cb166"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" tabindex="-1"></a><span class="co"># Create a vector x containing integers from -3 to 3 followed by a missing value</span></span>
<span id="cb166-2"><a href="#cb166-2" tabindex="-1"></a><span class="co"># Note that using parentheses around this expressions causes </span></span>
<span id="cb166-3"><a href="#cb166-3" tabindex="-1"></a><span class="co"># the output of x to print to the console.</span></span>
<span id="cb166-4"><a href="#cb166-4" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb166-5"><a href="#cb166-5" tabindex="-1"></a></span>
<span id="cb166-6"><a href="#cb166-6" tabindex="-1"></a></span>
<span id="cb166-7"><a href="#cb166-7" tabindex="-1"></a><span class="co"># Which values of x are equal to 0?</span></span>
<span id="cb166-8"><a href="#cb166-8" tabindex="-1"></a>x <span class="sc">==</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>[1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb168"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" tabindex="-1"></a><span class="co"># Which values of x are less than 0?</span></span>
<span id="cb168-2"><a href="#cb168-2" tabindex="-1"></a>x <span class="sc">&lt;</span> <span class="dv">0</span></span></code></pre></div>
<pre><code>[1]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb170"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" tabindex="-1"></a><span class="co"># Which values of x are less than or equal to 0?</span></span>
<span id="cb170-2"><a href="#cb170-2" tabindex="-1"></a>x <span class="sc">&lt;=</span> <span class="dv">0</span></span></code></pre></div>
<pre><code>[1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb172"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" tabindex="-1"></a><span class="co"># Which values of x are greater than or equal to 0?</span></span>
<span id="cb172-2"><a href="#cb172-2" tabindex="-1"></a>x <span class="sc">&gt;=</span> <span class="dv">0</span></span></code></pre></div>
<pre><code>[1] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb174"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" tabindex="-1"></a><span class="co"># Which values of x are in the set of values c(1, 3, 5)?</span></span>
<span id="cb174-2"><a href="#cb174-2" tabindex="-1"></a>x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>[1] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE</code></pre>
<p>We can use the <code>!</code> operator to negate any logical
comparison:</p>
<div class="sourceCode" id="cb176"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" tabindex="-1"></a><span class="co"># Which values of x are not equal to 0?</span></span>
<span id="cb176-2"><a href="#cb176-2" tabindex="-1"></a>x <span class="sc">!=</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>[1]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb178"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" tabindex="-1"></a><span class="co"># Which values of x are not less than 0?</span></span>
<span id="cb178-2"><a href="#cb178-2" tabindex="-1"></a><span class="sc">!</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>[1] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb180"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" tabindex="-1"></a><span class="co"># Which values of x are not in the set of values c(1, 3, 5)?</span></span>
<span id="cb180-2"><a href="#cb180-2" tabindex="-1"></a><span class="sc">!</span>(x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>))</span></code></pre></div>
<pre><code>[1]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
<p>We can also make more complex logical statements by combining
comparisons with the boolean operators “and” (<code>&amp;</code>) and
“or” (<code>|</code>):</p>
<div class="sourceCode" id="cb182"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" tabindex="-1"></a><span class="co"># Which values of x are less than -2 or greater than 1?</span></span>
<span id="cb182-2"><a href="#cb182-2" tabindex="-1"></a>(x <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">2</span>) <span class="sc">|</span> (x <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>[1]  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb184"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" tabindex="-1"></a><span class="co"># Which values of x are less than -2 and greater than 1?</span></span>
<span id="cb184-2"><a href="#cb184-2" tabindex="-1"></a>(x <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">2</span>) <span class="sc">&amp;</span> (x <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>Since each of these comparisons operates <strong>elementwise</strong>
and returns a logical vector that is the same length as <code>x</code>,
we can use the output of a comparison to select elements of the vector
x. Only the elements where the comparison was <code>TRUE</code> will be
returned.</p>
<div class="sourceCode" id="cb186"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" tabindex="-1"></a><span class="co"># Which values of x are equal to 0?</span></span>
<span id="cb186-2"><a href="#cb186-2" tabindex="-1"></a>x[x <span class="sc">==</span> <span class="dv">1</span>]</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode" id="cb188"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" tabindex="-1"></a><span class="co"># Which values of x are less than 0?</span></span>
<span id="cb188-2"><a href="#cb188-2" tabindex="-1"></a>x[x <span class="sc">&lt;</span> <span class="dv">0</span>]</span></code></pre></div>
<pre><code>[1] -3 -2 -1</code></pre>
<div class="sourceCode" id="cb190"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" tabindex="-1"></a><span class="co"># Which values of x are in the set of values c(1, 3, 5)?</span></span>
<span id="cb190-2"><a href="#cb190-2" tabindex="-1"></a>x[x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)]</span></code></pre></div>
<pre><code>[1] 1 3</code></pre>
<div class="sourceCode" id="cb192"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" tabindex="-1"></a><span class="co"># Which values of x are less than -2 and greater than 1?</span></span>
<span id="cb192-2"><a href="#cb192-2" tabindex="-1"></a>x[(x <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">2</span>) <span class="sc">&amp;</span> (x <span class="sc">&gt;</span> <span class="dv">1</span>)]</span></code></pre></div>
<pre><code>integer(0)</code></pre>
<p>Why did the last line return <code>integer(0)</code>? Because are no
elements of x that are both less than -2 and greater than 1 (that’s
impossible!) so <code>integer(0)</code> is an empty value.’</p>
</div>
<div id="subseting-data-using-logical-comparisons"
class="section level3">
<h3>Subseting data using logical comparisons</h3>
<p>The real power of logical expressions is when we use them to subset
data tables. For example, let’s calculate the mean water temperature in
August.</p>
<p>First we need to create a new column in the data frame that
identifies which month each measurement was taken. We do this using
functions from the lubridate package (introduced in lesson <a
href="chp-intro-to-R.html">Intro to R and RStudio</a>).</p>
<div class="sourceCode" id="cb194"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" tabindex="-1"></a><span class="co"># Load the lubridate package</span></span>
<span id="cb194-2"><a href="#cb194-2" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<pre><code>
Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>The following objects are masked from &#39;package:base&#39;:

    date, intersect, setdiff, union</code></pre>
<div class="sourceCode" id="cb197"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" tabindex="-1"></a><span class="co"># ymd_hms() comes from the lubridate package</span></span>
<span id="cb197-2"><a href="#cb197-2" tabindex="-1"></a><span class="co"># and converts the character vector in the startDateTime column</span></span>
<span id="cb197-3"><a href="#cb197-3" tabindex="-1"></a><span class="co"># into a date-time class </span></span>
<span id="cb197-4"><a href="#cb197-4" tabindex="-1"></a>surfwater<span class="sc">$</span>startDateTime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(surfwater<span class="sc">$</span>startDateTime)</span>
<span id="cb197-5"><a href="#cb197-5" tabindex="-1"></a></span>
<span id="cb197-6"><a href="#cb197-6" tabindex="-1"></a><span class="fu">class</span>(surfwater<span class="sc">$</span>startDateTime) </span></code></pre></div>
<pre><code>[1] &quot;POSIXct&quot; &quot;POSIXt&quot; </code></pre>
<div class="sourceCode" id="cb199"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" tabindex="-1"></a><span class="co"># POSIXct and POSIXt are the names of classes that R uses to</span></span>
<span id="cb199-2"><a href="#cb199-2" tabindex="-1"></a><span class="co"># store dates and times</span></span>
<span id="cb199-3"><a href="#cb199-3" tabindex="-1"></a></span>
<span id="cb199-4"><a href="#cb199-4" tabindex="-1"></a><span class="co"># Create a new column that identifies the month for each observation</span></span>
<span id="cb199-5"><a href="#cb199-5" tabindex="-1"></a>surfwater<span class="sc">$</span>month <span class="ot">&lt;-</span> <span class="fu">month</span>(surfwater<span class="sc">$</span>startDateTime)</span></code></pre></div>
<p>Click on the <code>surfwater</code> object in the Environment tab to
verify that there is a new column at the end named
<code>month</code>.</p>
<p>Next we subset the data to only rows where <code>month == 8</code>
since August is the 8th month.</p>
<div class="sourceCode" id="cb200"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" tabindex="-1"></a>surfwater_Aug <span class="ot">&lt;-</span> surfwater[surfwater<span class="sc">$</span>month <span class="sc">==</span> <span class="dv">8</span>, ]</span></code></pre></div>
<p>Finally we calculate the average of the values in the
<code>surfWaterTemp.mean</code> column.</p>
<div class="sourceCode" id="cb201"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" tabindex="-1"></a><span class="fu">mean</span>(surfwater_Aug<span class="sc">$</span>surfWaterTemp.mean)</span></code></pre></div>
<pre><code>[1] NA</code></pre>
<p>Ooops! There must be missing values. Use the <code>na.rm</code>
argument to discard these before calculating the average.</p>
<div class="sourceCode" id="cb203"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" tabindex="-1"></a><span class="fu">mean</span>(surfwater_Aug<span class="sc">$</span>surfWaterTemp.mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>[1] 13.14276</code></pre>
<p>Note that we can do both steps at once if we index the column by name
at the same time that we subset the rows:</p>
<div class="sourceCode" id="cb205"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" tabindex="-1"></a><span class="fu">mean</span>(surfwater[surfwater<span class="sc">$</span>month <span class="sc">==</span> <span class="dv">8</span>, <span class="st">&quot;surfWaterTemp.mean&quot;</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>[1] 13.14276</code></pre>
<div class="{callout-tip}">
<p>Be careful using logical comparisons to select data when the data
contain missing values <code>NA</code>. A logical comparison will be
<code>NA</code> whenever data are missing and using <code>NA</code> to
index a vector will return an <code>NA</code> value, which might not be
what you had intended.</p>
<div class="sourceCode" id="cb207"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="cn">NA</span>)</span>
<span id="cb207-2"><a href="#cb207-2" tabindex="-1"></a></span>
<span id="cb207-3"><a href="#cb207-3" tabindex="-1"></a>y <span class="sc">==</span> <span class="st">&quot;A&quot;</span></span></code></pre></div>
<pre><code>[1]  TRUE FALSE  TRUE    NA</code></pre>
<div class="sourceCode" id="cb209"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" tabindex="-1"></a>y[y <span class="sc">==</span> <span class="st">&quot;A&quot;</span>]</span></code></pre></div>
<pre><code>[1] &quot;A&quot; &quot;A&quot; NA </code></pre>
</div>
<p>While you can use a logical expression to directly index the rows of
a dataframe (like we just did), if you have missing data in the column
that you are subsetting on, it is better to use the
<code>subset()</code> function, which will not return rows of missing
data.</p>
<p>Here’s an example to calculate the mean dissolved oxygen content from
all measurements where the surface water temperature is less than
5C.</p>
<div class="sourceCode" id="cb211"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" tabindex="-1"></a><span class="co"># Here&#39;s two ways to obtain dissolved oxygen values from measurements where</span></span>
<span id="cb211-2"><a href="#cb211-2" tabindex="-1"></a><span class="co"># the water temperature was less than 5 C</span></span>
<span id="cb211-3"><a href="#cb211-3" tabindex="-1"></a></span>
<span id="cb211-4"><a href="#cb211-4" tabindex="-1"></a><span class="co"># Bad way to do this because there are missing data in surfWaterTemp.mean</span></span>
<span id="cb211-5"><a href="#cb211-5" tabindex="-1"></a>DOvals_bad <span class="ot">&lt;-</span> surfwater[surfwater<span class="sc">$</span>surfWaterTemp.mean <span class="sc">&lt;</span> <span class="dv">5</span>, <span class="st">&#39;dissolvedOxygen.mean&#39;</span>]</span>
<span id="cb211-6"><a href="#cb211-6" tabindex="-1"></a></span>
<span id="cb211-7"><a href="#cb211-7" tabindex="-1"></a><span class="co"># Good way using subset because it drops the rows with missing  surfWaterTemp.mean first</span></span>
<span id="cb211-8"><a href="#cb211-8" tabindex="-1"></a>DOvals_good <span class="ot">&lt;-</span> <span class="fu">subset</span>(surfwater, surfWaterTemp.mean <span class="sc">&lt;</span> <span class="dv">5</span>)<span class="sc">$</span>dissolvedOxygen.mean</span>
<span id="cb211-9"><a href="#cb211-9" tabindex="-1"></a></span>
<span id="cb211-10"><a href="#cb211-10" tabindex="-1"></a><span class="co"># Compare the number of elements in the two vectors of dissolved oxygen values</span></span>
<span id="cb211-11"><a href="#cb211-11" tabindex="-1"></a><span class="fu">length</span>(DOvals_bad)</span></code></pre></div>
<pre><code>[1] 2112</code></pre>
<div class="sourceCode" id="cb213"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" tabindex="-1"></a><span class="fu">length</span>(DOvals_good)</span></code></pre></div>
<pre><code>[1] 1670</code></pre>
<div class="sourceCode" id="cb215"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" tabindex="-1"></a><span class="co"># Calculate the mean of the values</span></span>
<span id="cb215-2"><a href="#cb215-2" tabindex="-1"></a><span class="fu">mean</span>(DOvals_good, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>[1] 10.37565</code></pre>
<p>Using subset allows us to know that the missing values in a
calculation come from missing dissolved oxygen values and not from
missing temperature values. Another benefit of using
<code>subset()</code> is that it is less text and easier to read.</p>
<div class="challenge">
<p>Calculate the average surface water temperature in April from
measurements when the chlorophyll content
(<code>chlorophyll.mean</code>) was above 0.8 g/L.</p>
<details>
<summary>
<strong>Solution:</strong>
</summary>
<div class="solution">
<div class="sourceCode" id="cb217"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" tabindex="-1"></a>temp_vals <span class="ot">&lt;-</span> <span class="fu">subset</span>(surfwater, (month <span class="sc">==</span> <span class="dv">4</span>)<span class="sc">&amp;</span>(chlorophyll.mean <span class="sc">&gt;</span> .<span class="dv">8</span>))<span class="sc">$</span>surfWaterTemp</span>
<span id="cb217-2"><a href="#cb217-2" tabindex="-1"></a></span>
<span id="cb217-3"><a href="#cb217-3" tabindex="-1"></a><span class="fu">mean</span>(temp_vals)</span></code></pre></div>
<pre><code>[1] 3.711597</code></pre>
</div>
</details>
</div>
<p><br></p>
<div id="finding-missing-data" class="section level4">
<h4>Finding missing data</h4>
<p>It is often critical to find and examine places where data are
missing before performing an analysis. While missing data are often
truly missing, missing data also occur when there has been an error in
data entry or a calculation has not produced the result we anticipated.
Rather than immediately exclude missing data from the analysis (like we
did earlier), we should probably examine it first to see why it may be
missing.</p>
<p>One of the most useful functions in R is <code>is.na()</code>. This
tests whether each element of a vector is equal to a missing value
(<code>NA</code>). The output of <code>is.na()</code> is a logical
vector with the same length as the input vector:</p>
<div class="sourceCode" id="cb219"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" tabindex="-1"></a><span class="co"># Replace the 4th element of x as missing</span></span>
<span id="cb219-2"><a href="#cb219-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>[1] -3 -2 -1  0  1  2  3</code></pre>
<div class="sourceCode" id="cb221"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" tabindex="-1"></a>x[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb221-2"><a href="#cb221-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>[1] -3 -2 -1 NA  1  2  3</code></pre>
<div class="sourceCode" id="cb223"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" tabindex="-1"></a><span class="co"># Find the missing values in x</span></span>
<span id="cb223-2"><a href="#cb223-2" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code></pre></div>
<pre><code>[1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<p>Since <code>is.na()</code> returns a logical vector, we can use it to
subset the rows of a data frame to only data that are missing (or not
missing is we use <code>!is.na()</code>).</p>
<p>Let’s find the rows of <code>surfwater</code> with missing surface
water temperature values.</p>
<div class="sourceCode" id="cb225"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" tabindex="-1"></a><span class="co"># Extract all rows with missing value in the surfWaterTemp.mean column</span></span>
<span id="cb225-2"><a href="#cb225-2" tabindex="-1"></a>missing_temp <span class="ot">&lt;-</span> surfwater[<span class="fu">is.na</span>(surfwater<span class="sc">$</span>surfWaterTemp.mean), ]</span></code></pre></div>
<p>Click on the new object named missing_temp in the Environment panel.
Scrolling through the data shows that most of the missing values appear
to occur on one of a handful of days, presumably when the sensor was
malfunctioning. We can verify this by tabulating the dates when these
data were missing:</p>
<div class="sourceCode" id="cb226"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" tabindex="-1"></a><span class="co"># Extract the date from the startDateTime column</span></span>
<span id="cb226-2"><a href="#cb226-2" tabindex="-1"></a>missing_dates <span class="ot">&lt;-</span> <span class="fu">date</span>(missing_temp<span class="sc">$</span>startDateTime)</span>
<span id="cb226-3"><a href="#cb226-3" tabindex="-1"></a></span>
<span id="cb226-4"><a href="#cb226-4" tabindex="-1"></a><span class="co"># Count the number occurrences of each date</span></span>
<span id="cb226-5"><a href="#cb226-5" tabindex="-1"></a><span class="co"># This gives a table of the number of missing temperature measurements for each date.</span></span>
<span id="cb226-6"><a href="#cb226-6" tabindex="-1"></a><span class="fu">table</span>(missing_dates)</span></code></pre></div>
<pre><code>missing_dates
2021-04-20 2021-04-26 2021-04-28 2021-04-29 2021-05-04 2021-05-13 2021-05-18 
         1          1          8          2          4          1          5 
2021-06-02 2021-06-19 2021-06-20 2021-06-21 2021-07-01 2021-07-20 2021-07-21 
         5         42         47         46          6          6         44 
2021-07-26 2021-08-04 2021-08-17 2021-08-18 2021-08-24 2021-08-31 2021-09-01 
         2          3          2          4          1          3          2 
2021-09-07 2021-09-08 2021-09-09 2021-09-14 2021-10-25 2021-10-26 2021-10-27 
        13         32          3          5          1          9         48 
2021-10-28 2021-10-29 
        48         48 </code></pre>
</div>
</div>
<div id="putting-it-all-together" class="section level3">
<h3>Putting it all together</h3>
<p>In addition to nearly continuous measurements of water quality, NEON
collects water samples several times per year and measures microbial
abundance and diversity. How might water quality impact (or be affected
by) the concentration of microbial cells in the water?</p>
<p>We will use the data subsetting skills we ljst learned to examine
water quality data from time points when surface waters were sampled for
microbes. Microbial cell count data come from <a
href="https://data.neonscience.org/data-products/DP1.20138.001">DP1.20138.001</a>.</p>
<div class="sourceCode" id="cb228"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" tabindex="-1"></a><span class="co"># Load the microbial cell count data from Teakettle Creek in 2021</span></span>
<span id="cb228-2"><a href="#cb228-2" tabindex="-1"></a>microbes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/NEON_Water/microbe_abun_TECR_2021-04_2021-10.csv&quot;</span>)</span>
<span id="cb228-3"><a href="#cb228-3" tabindex="-1"></a></span>
<span id="cb228-4"><a href="#cb228-4" tabindex="-1"></a><span class="co"># View the structure of these data</span></span>
<span id="cb228-5"><a href="#cb228-5" tabindex="-1"></a><span class="fu">str</span>(microbes)</span></code></pre></div>
<pre><code>&#39;data.frame&#39;:   5 obs. of  8 variables:
 $ cellCountSampleID: chr  &quot;TECR.SS.20210505.CC&quot; &quot;TECR.SS.20210601.CC&quot; &quot;TECR.SS.20210714.CC&quot; &quot;TECR.SS.20210803.CC&quot; ...
 $ siteID           : chr  &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; &quot;TECR&quot; ...
 $ namedLocation    : chr  &quot;TECR.AOS.S2&quot; &quot;TECR.AOS.S2&quot; &quot;TECR.AOS.S2&quot; &quot;TECR.AOS.S2&quot; ...
 $ collectDate      : chr  &quot;2021-05-05 16:40:00&quot; &quot;2021-06-01 18:46:00&quot; &quot;2021-07-14 16:20:00&quot; &quot;2021-08-03 17:09:00&quot; ...
 $ cells_ml         : num  173320 468587 458024 259259 4609056
 $ qaqcStatus       : logi  NA NA NA NA NA
 $ sampleCondition  : chr  &quot;Other (describe in remarks)&quot; &quot;OK&quot; &quot;OK&quot; &quot;OK&quot; ...
 $ remarks          : chr  &quot;Sample was partially frozen but was analyzable.&quot; NA NA NA ...</code></pre>
<p>There are 5 rows of data, each corresponding to a water sample. There
are several columns that give information about each of the water
samples (e.g. a unique ID number, the location where the sample was
collected and notes about the quality of the sample). The two columns we
will need are <code>collectDate</code> to match with the measurements in
<code>surfwater</code> and the <code>cells_ml</code> column which gives
the number of microbial cells per ml.</p>
<p>Which time points were water samples collected?</p>
<div class="sourceCode" id="cb230"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" tabindex="-1"></a>microbes<span class="sc">$</span>collectDate</span></code></pre></div>
<pre><code>[1] &quot;2021-05-05 16:40:00&quot; &quot;2021-06-01 18:46:00&quot; &quot;2021-07-14 16:20:00&quot;
[4] &quot;2021-08-03 17:09:00&quot; &quot;2021-09-01 17:09:00&quot;</code></pre>
<p>But wait, each row in <code>surfwater</code> represents a 30-minute
average beginning at the time in the column <code>startDateTime</code>
and ending in the column <code>endDateTime</code>. How can we match
these up?</p>
<p>For now we can do it manually by examining the 5 collection dates and
defining a set of values to match with the <code>startDateTime</code>
column which would ensure that the collection dates fall within the
30-minute time interval. We can do this because we know that each time
interval begins on the hour or half hour:</p>
<div class="sourceCode" id="cb232"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" tabindex="-1"></a><span class="co"># Tabulate the number of rows that begin on a certain hour</span></span>
<span id="cb232-2"><a href="#cb232-2" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">hour</span>(surfwater<span class="sc">$</span>startDateTime))</span></code></pre></div>
<pre><code>
  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19 
428 428 428 428 428 428 428 428 428 428 428 428 428 428 428 428 428 428 428 428 
 20  21  22  23 
428 428 428 428 </code></pre>
<div class="sourceCode" id="cb234"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" tabindex="-1"></a><span class="co"># Tabulate the number of rows that begin on a certain minute of the hour</span></span>
<span id="cb234-2"><a href="#cb234-2" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">minute</span>(surfwater<span class="sc">$</span>startDateTime))</span></code></pre></div>
<pre><code>
   0   30 
5136 5136 </code></pre>
<div class="sourceCode" id="cb236"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" tabindex="-1"></a><span class="co"># Tabulate the number of rows that begin on a certain second of the hour</span></span>
<span id="cb236-2"><a href="#cb236-2" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">second</span>(surfwater<span class="sc">$</span>startDateTime))</span></code></pre></div>
<pre><code>
    0 
10272 </code></pre>
<p>Thus, each start date should have the form:
<code>YYYY-MM-DD HH:00:00</code> or
<code>YYYY-MM-DD HH:30:00</code>.</p>
<div class="sourceCode" id="cb238"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" tabindex="-1"></a><span class="co"># Define a set of startDateTimes that match the five collection</span></span>
<span id="cb238-2"><a href="#cb238-2" tabindex="-1"></a><span class="co"># dates in microbes</span></span>
<span id="cb238-3"><a href="#cb238-3" tabindex="-1"></a>these_dates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2021-05-05 16:30:00&quot;</span>,</span>
<span id="cb238-4"><a href="#cb238-4" tabindex="-1"></a>                 <span class="st">&quot;2021-06-01 18:30:00&quot;</span>,</span>
<span id="cb238-5"><a href="#cb238-5" tabindex="-1"></a>                 <span class="st">&quot;2021-07-14 16:00:00&quot;</span>,</span>
<span id="cb238-6"><a href="#cb238-6" tabindex="-1"></a>                 <span class="st">&quot;2021-08-03 17:00:00&quot;</span>,</span>
<span id="cb238-7"><a href="#cb238-7" tabindex="-1"></a>                 <span class="st">&quot;2021-09-01 17:00:00&quot;</span>)</span>
<span id="cb238-8"><a href="#cb238-8" tabindex="-1"></a></span>
<span id="cb238-9"><a href="#cb238-9" tabindex="-1"></a><span class="co"># Convert to a date-time class</span></span>
<span id="cb238-10"><a href="#cb238-10" tabindex="-1"></a>these_dates <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(these_dates)</span>
<span id="cb238-11"><a href="#cb238-11" tabindex="-1"></a></span>
<span id="cb238-12"><a href="#cb238-12" tabindex="-1"></a></span>
<span id="cb238-13"><a href="#cb238-13" tabindex="-1"></a><span class="co"># Subset surfwater to only rows whose startDateTime column</span></span>
<span id="cb238-14"><a href="#cb238-14" tabindex="-1"></a><span class="co"># matches one of the dates in these_dates</span></span>
<span id="cb238-15"><a href="#cb238-15" tabindex="-1"></a><span class="fu">subset</span>(surfwater, startDateTime <span class="sc">%in%</span> these_dates)</span></code></pre></div>
<pre><code>     siteID       startDateTime         endDateTime surfWaterTemp.mean
1666   TECR 2021-05-05 16:30:00 2021-05-05 17:00:00              7.302
2966   TECR 2021-06-01 18:30:00 2021-06-01 19:00:00             11.505
5025   TECR 2021-07-14 16:00:00 2021-07-14 16:30:00             13.994
5987   TECR 2021-08-03 17:00:00 2021-08-03 17:30:00             13.062
7379   TECR 2021-09-01 17:00:00 2021-09-01 17:30:00             10.850
     surfWaterNitrate.mean specificConductance.mean dissolvedOxygen.mean
1666                   1.5                 33.16967                 9.44
2966                   1.0                       NA                   NA
5025                   2.7                       NA                   NA
5987                   2.8                       NA                   NA
7379                   0.8                       NA                   NA
      pH.mean chlorophyll.mean turbidity.mean fDOM.mean month
1666 7.400667            0.513       1.008667  25.43667     5
2966       NA               NA             NA        NA     6
5025       NA               NA             NA        NA     7
5987       NA               NA             NA        NA     8
7379       NA               NA             NA        NA     9</code></pre>
<p>Once we have these data we can make a quick plot to compare microbial
abundance to water quality. Let’s look at nitrate:</p>
<div class="sourceCode" id="cb240"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" tabindex="-1"></a><span class="co"># Save the subsetted data to a new data frame</span></span>
<span id="cb240-2"><a href="#cb240-2" tabindex="-1"></a>microbe_wq_data <span class="ot">&lt;-</span> <span class="fu">subset</span>(surfwater, startDateTime <span class="sc">%in%</span> these_dates)</span>
<span id="cb240-3"><a href="#cb240-3" tabindex="-1"></a></span>
<span id="cb240-4"><a href="#cb240-4" tabindex="-1"></a><span class="co"># Graph microbial cell counts (y axis) vs. nitrate concentration (x axis)</span></span>
<span id="cb240-5"><a href="#cb240-5" tabindex="-1"></a><span class="co"># Specify axis labels with xlab and ylab arguments</span></span>
<span id="cb240-6"><a href="#cb240-6" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> microbe_wq_data<span class="sc">$</span>surfWaterNitrate.mean,</span>
<span id="cb240-7"><a href="#cb240-7" tabindex="-1"></a>     <span class="at">y =</span> microbes<span class="sc">$</span>cells_ml,</span>
<span id="cb240-8"><a href="#cb240-8" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Nitrate (umol per L)&quot;</span>,</span>
<span id="cb240-9"><a href="#cb240-9" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Microbial cell density (num. per ml)&quot;</span>)</span></code></pre></div>
<p><img src="images/rmd-04-unnamed-chunk-66-1.png" width="816" style="display: block; margin: auto;" /></p>
<p>Congrats! You’ve learned a lot this lesson. Now its time to move on
and practice with the Exercises.</p>
<p>Or, if you’re interested, read on for a better way to solve the date
matching problem above using functions within the lubridate package.</p>
<p>What we need to do is figure out which time interval each microbial
sampling time point falls within. To do this we will use a function in
the <code>lubridate</code> packages that defines a time interval class
that occurs between two points in time. This time interval class will
allow us to check whether each microbial sampling time point falls
within each interval.</p>
<div class="sourceCode" id="cb241"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" tabindex="-1"></a><span class="co"># Convert collectDate to a date-time</span></span>
<span id="cb241-2"><a href="#cb241-2" tabindex="-1"></a>microbes<span class="sc">$</span>collectDate <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(microbes<span class="sc">$</span>collectDate)</span>
<span id="cb241-3"><a href="#cb241-3" tabindex="-1"></a></span>
<span id="cb241-4"><a href="#cb241-4" tabindex="-1"></a><span class="co"># Convert endDateTime to a date-time class</span></span>
<span id="cb241-5"><a href="#cb241-5" tabindex="-1"></a>surfwater<span class="sc">$</span>endDateTime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(surfwater<span class="sc">$</span>endDateTime)</span>
<span id="cb241-6"><a href="#cb241-6" tabindex="-1"></a></span>
<span id="cb241-7"><a href="#cb241-7" tabindex="-1"></a><span class="co"># Define a new column in surfwater that records the time interval </span></span>
<span id="cb241-8"><a href="#cb241-8" tabindex="-1"></a><span class="co"># for each measurement</span></span>
<span id="cb241-9"><a href="#cb241-9" tabindex="-1"></a>surfwater<span class="sc">$</span>timeInterval <span class="ot">&lt;-</span> <span class="fu">interval</span>(<span class="at">start =</span> surfwater<span class="sc">$</span>startDateTime,</span>
<span id="cb241-10"><a href="#cb241-10" tabindex="-1"></a>                                   <span class="at">end =</span> surfwater<span class="sc">$</span>endDateTime)</span></code></pre></div>
<p>If you click on surfwater in the Environment panel, you should see a
new column named timeInterval of class ‘Interval’.</p>
<p>Now we can subset the row of <code>surfwater</code> whose
<code>timeInterval</code> include the first microbial water sample
time.</p>
<div class="sourceCode" id="cb242"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" tabindex="-1"></a><span class="co"># Define the time point that we are interested in</span></span>
<span id="cb242-2"><a href="#cb242-2" tabindex="-1"></a><span class="co"># and print the value of this_time</span></span>
<span id="cb242-3"><a href="#cb242-3" tabindex="-1"></a>(this_time <span class="ot">&lt;-</span> microbes[<span class="dv">1</span>, <span class="st">&quot;collectDate&quot;</span>])</span></code></pre></div>
<pre><code>[1] &quot;2021-05-05 16:40:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb244"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" tabindex="-1"></a><span class="co"># Subset to rows whose time interval contains this_time</span></span>
<span id="cb244-2"><a href="#cb244-2" tabindex="-1"></a><span class="fu">subset</span>(surfwater, this_time <span class="sc">%within%</span> timeInterval)</span></code></pre></div>
<pre><code>     siteID       startDateTime         endDateTime surfWaterTemp.mean
1666   TECR 2021-05-05 16:30:00 2021-05-05 17:00:00              7.302
     surfWaterNitrate.mean specificConductance.mean dissolvedOxygen.mean
1666                   1.5                 33.16967                 9.44
      pH.mean chlorophyll.mean turbidity.mean fDOM.mean month
1666 7.400667            0.513       1.008667  25.43667     5
                                         timeInterval
1666 2021-05-05 16:30:00 UTC--2021-05-05 17:00:00 UTC</code></pre>
</div>
</div>
<div id="exercises" class="section level2">
<h2>Exercises</h2>
<dl>
<dt>After completing these exercises, learners will be able to</dt>
<dd>

</dd>
</dl>
<ol style="list-style-type: decimal">
<li>create and extract or set values in vectors, matrices and arrays in
R</li>
<li>differentiate between numeric, character, factor and logical data
types in R</li>
<li>view the structure and class of an object in R</li>
<li>write logical test expressions using
<code>==</code>,<code>!=</code>, <code>&gt;</code>, <code>&lt;</code>,
and <code>%in%</code></li>
</ol>
<p><strong>4.1</strong></p>
<p>Determine the class and structure of each of the following
objects:</p>
<div class="sourceCode" id="cb246"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="st">&quot;4&quot;</span>)</span>
<span id="cb246-2"><a href="#cb246-2" tabindex="-1"></a></span>
<span id="cb246-3"><a href="#cb246-3" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span>)</span>
<span id="cb246-4"><a href="#cb246-4" tabindex="-1"></a></span>
<span id="cb246-5"><a href="#cb246-5" tabindex="-1"></a>C <span class="ot">&lt;-</span> <span class="fu">factor</span>(A)</span>
<span id="cb246-6"><a href="#cb246-6" tabindex="-1"></a></span>
<span id="cb246-7"><a href="#cb246-7" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">A =</span> A, <span class="at">B =</span> B, <span class="at">C =</span> C)</span>
<span id="cb246-8"><a href="#cb246-8" tabindex="-1"></a></span>
<span id="cb246-9"><a href="#cb246-9" tabindex="-1"></a>dat2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(A, B, C)</span></code></pre></div>
<p><strong>4.2</strong></p>
<ol style="list-style-type: decimal">
<li>What is the data type of object <code>A</code> in the code above?
Why doesn’t it have two data types?</li>
<li>Write one line of code that prints the data type of the object
<code>A</code>.</li>
</ol>
<p><strong>4.3</strong></p>
<p>Using object <code>dat2</code> in the code above, demonstrate two
different ways to select the 3rd item in column <code>B</code>.</p>
<p><strong>4.4</strong></p>
<p>Using object <code>dat2</code> in the code above, append a new column
named <code>X</code> that is the numeric equivalent of column
<code>A</code>.</p>
<p><strong>4.5</strong></p>
<p>Using object <code>dat1</code> in the code above, demonstrate two
different ways to select the 3rd item in 1st element.</p>
<p><strong>4.6</strong></p>
<p>Using object <code>dat1</code> in code above, append a third item
named <code>Zeros</code> that contains a vector with four
<code>0</code>s.</p>
<p><strong>4.7</strong></p>
<p>Using the object <code>C</code> in the code above, change the order
of the levels so that the the levels are in descending numeric order
(e.g. “4” is the first level and “1” is the last level).</p>
<p><strong>4.8</strong></p>
<p>What class are each of the following objects? How are these classes
similar? How are they different?</p>
<div class="sourceCode" id="cb247"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">2.8</span>, <span class="dv">5</span>)</span>
<span id="cb247-2"><a href="#cb247-2" tabindex="-1"></a></span>
<span id="cb247-3"><a href="#cb247-3" tabindex="-1"></a>Y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(X, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb247-4"><a href="#cb247-4" tabindex="-1"></a></span>
<span id="cb247-5"><a href="#cb247-5" tabindex="-1"></a>Z <span class="ot">&lt;-</span> <span class="fu">array</span>(X, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>))</span></code></pre></div>
<p><strong>4.9</strong></p>
<ol style="list-style-type: decimal">
<li>Using the objects above, write one line of code that calculates the
product of the 3rd element of <code>X</code> and the second row of
<code>Y</code>.</li>
<li>What type of object is the result?</li>
<li>What are the dimensions of the result?</li>
</ol>
<p><strong>4.10</strong></p>
<p>Write an R script that calculates the monthly mean dissolved oxygen
content of surface waters at the NEON Teakettle lake site. Use the data
in the file
<code>data/NEON_water/surfwater_30min_avg_TECR_2021-04_2021-10.csv</code>.</p>
<p>The output of your code must be a data frame with twelve rows and two
columns: <code>month</code> (containing the months 1 - 12 or Jan - Dec)
and <code>dissolvedOxygen.mean</code> (containing the monthly mean
dissolved oxygen values). The dissolved oxygen values should only report
a missing value (<code>NA</code>) if there are no dissolved oxygen data
for a given month.</p>
<p><strong>4.11</strong></p>
<p>Write an R script that calculates the monthly mean surface water
temperature at the NEON Teakettle lake site. Use the data in the file
<code>data/NEON_water/surfwater_30min_avg_TECR_2021-04_2021-10.csv</code>.</p>
<p>The output of your code must be a data frame with twelve rows and two
columns: <code>month</code> (containing the months 1 - 12 or Jan - Dec)
and <code>surfWaterTemp.mean</code> (containing the monthly mean
dissolved oxygen values). The temperature values should only report a
missing value (<code>NA</code>) if there are no temperature data for a
given month.</p>
<p><strong>4.12</strong></p>
<p>Write a script that does the following:</p>
<ol style="list-style-type: decimal">
<li>Read in the data in the file
<code>data/NEON_water/waterqual_inst_TECR_2021-04_2021-10.csv</code> to
a data frame in R.</li>
<li>Save the column names to a vector named <code>WQnames</code></li>
<li>Print the dimensions of these data (e.g. how many rows and
columns).</li>
<li>Print the last 10 rows of these data from the <code>fDOM</code> and
<code>chlorophyll</code> columns.</li>
</ol>
<p><strong>4.13</strong></p>
<p>Write a script that does the following:</p>
<ol style="list-style-type: decimal">
<li>Read in the data in the file
<code>data/NEON_water/waterqual_inst_TECR_2021-04_2021-10.csv</code> to
a data frame in R.</li>
<li>The <code>QF</code> columns are quality flags that indicate issues
with the data. A <code>QF = 0</code> indicates that the data are good.
Extract all <code>pH</code> values where the <code>pHFinalQF</code>
column is not equal to <code>0</code>. Save these values to a vector
named <code>bad_pH</code>.</li>
<li>What fraction of the data contain bad pH values? HINT: divide the
number of values in <code>bad_pH</code> by the total number of
observations in the data.</li>
</ol>
</div>
<div id="sources-and-resources" class="section level2">
<h2>Sources and Resources</h2>
<p>This lesson was written by Jes Coyle and inspired by <a
href="https://swcarpentry.github.io/r-novice-gapminder/"><span
class="citation">Zimmerman et al. (2019)</span></a> episodes 4, 5, and
6.</p>
<!--### Additional Resources-->
<div id="cited-references" class="section level3 unnumbered">
<h3 class="unnumbered">Cited References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-NEON-microbialcellcounts" class="csl-entry">
National Ecological Observatory Network (NEON). 2023a. <span>“Surface
Water Microbe Cell Count (DP1.20138.001).”</span> National Ecological
Observatory Network (NEON). <a
href="https://doi.org/10.48443/8AH9-H316">https://doi.org/10.48443/8AH9-H316</a>.
</div>
<div id="ref-NEON-surfwatertemp" class="csl-entry">
———. 2023b. <span>“Temperature (PRT) in Surface Water
(DP1.20053.001).”</span> National Ecological Observatory Network (NEON).
<a
href="https://doi.org/10.48443/33ZJ-CQ24">https://doi.org/10.48443/33ZJ-CQ24</a>.
</div>
<div id="ref-NEON-surfwaterquality" class="csl-entry">
———. 2023c. <span>“Water Quality (DP1.20288.001).”</span> National
Ecological Observatory Network (NEON). <a
href="https://doi.org/10.48443/MPW3-3Q06">https://doi.org/10.48443/MPW3-3Q06</a>.
</div>
<div id="ref-swc-reproducible-lesson" class="csl-entry">
Zimmerman, Naupaka, Greg Wilson, Raniere Silva, Scott Ritchie, François
Michonneau, Jeffrey Oliver, Harriet Dashnow, et al. 2019. <span>“<span
class="nocase">swcarpentry/r-novice-gapminder: Software Carpentry: R for
Reproducible Scientific Analysis, June 2019</span>.”</span> Zenodo. <a
href="https://doi.org/10.5281/zenodo.3265164">https://doi.org/10.5281/zenodo.3265164</a>.
</div>
</div>
</div>
</div>
</div>

<hr>
<p>Introduction to Computing in R with NEON</p>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
